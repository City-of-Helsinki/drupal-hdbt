{#
  This twig is called only for certain links
  see conditions in \Drupal\helfi_api_base\Link\LinkProcessor::preRenderLink
#}
{% spaceless %}

  {% if 'data-selected-icon' in url.options.attributes|keys %}
    {% set selected_icon -%}{% include '@hdbt/misc/icon.twig' ignore missing with {icon: url.options.attributes['data-selected-icon']} only %}{%- endset %}
  {% endif %}

  {% if 'data-is-external' in attributes|keys %}
    {% set attribute_icon %} <span class="link__type link__type--external" aria-labelledby="aria-external-link-label"></span>{%- endset %}
  {% endif %}

  {% if 'data-protocol' in attributes|keys and attributes['data-protocol'] != 'false'%}
    {% if attributes['data-protocol'] == 'tel' %}
      {% set attribute_icon %} <span class="link__type link__type--tel" aria-labelledby="aria-tel-link-label"></span>{% endset %}
    {% elseif attributes['data-protocol'] == 'mailto' %}
      {% set attribute_icon %} <span class="link__type link__type--mailto" aria-labelledby="aria-mailto-link-label"></span>{% endset %}
    {% endif %}
  {% endif %}

  {{ selected_icon }}{{ title }}{{ attribute_icon }}

{% endspaceless %}
