{% set design = content.field_banner_design[0]['#markup'] %}

{% if design == 'align-left' %}
  {% set design_class = 'component--banner-align-left' %}
{% elseif design == 'align-center' %}
  {% set design_class = 'component--banner-align-center' %}
{% elseif design == 'align-left-secondary' %}
  {% set design_class = 'component--banner-align-left component--banner-secondary' %}
{% elseif design == 'align-center-secondary' %}
  {% set design_class = 'component--banner-align-center component--banner-secondary' %}
{% else %}
  {% set design_class = null %} {# This should not happen #}
{% endif %}

{% set has_title = false %}
{% if content.field_banner_title|render %}
  {% set has_title = true %}
{% endif %}

{% set has_description = false %}
{% if content.field_banner_desc|render %}
  {% set has_description = true %}
{% endif %}

{% set has_link = false %}
{% if content.field_banner_link|render %}
  {% set has_link = true %}
{% endif %}

{% set has_content = false %}
{% if has_title or has_description or has_link %}
  {% set has_content = true %}
{% endif %}

{% set has_icon = false %}
{% if content.field_icon|render %}
  {% set has_icon = true %}
{% endif %}

{% set link = content.field_banner_link.0['#url'] %}
{% set text = content.field_banner_link.0['#title'] %}
{% set link_type = content.field_banner_link_design[0]['#markup'] %}
{% set open_in_a_new_window = link.options.target_new %}
{% set icon = link.options.icon %}
{% block paragraph %}
  {% if has_content %}
    {% embed "@hdbt/misc/component.twig" with
      {
        component_classes: [
          'component--banner',
          design_class,
          has_icon ? 'component--banner-has-icon'
        ],
        component_content_class: 'banner',
      }
    %}
      {% block component_content %}

      {% set banner_icon = null %}
      {% if content.field_icon|render and 'align-left' in design %}
        {% set banner_icon = content.field_icon %}
      {% endif %}

      {% embed "@hdbt/misc/banner.twig" with {
        icon_rendered: content.field_icon|render,
        title: has_title ? content.field_banner_title : null,
        description: has_description ? content.field_banner_desc : null,
        banner_desc_class: 'user-edited-content',
        link: has_link,
        link_type: link_type,
        link_text: text,
        link_url: link,
        link_new_window: open_in_a_new_window,
      } %}
      {% endembed %}

      {% endblock component_content %}
    {% endembed %}
  {% endif %}
{% endblock paragraph %}
