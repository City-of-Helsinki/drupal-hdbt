(()=>{var e=Object.defineProperty;var t=(t,n,a)=>n in t?e(t,n,{enumerable:true,configurable:true,writable:true,value:a}):t[n]=a;var n=(t,n)=>e(t,"name",{value:n,configurable:true});var a=(e,n,a)=>t(e,typeof n!=="symbol"?n+"":n,a);var s=class e{constructor(t){a(this,"saveEventKey","localstorage-save-event");a(this,"loadOnChange",n(()=>{this.loadData()},"loadOnChange"));a(this,"triggerSaveEvent",n(()=>{dispatchEvent(new CustomEvent(this.saveEventKey))},"triggerSaveEvent"));a(this,"loadData",n(()=>{let t=null;try{t=localStorage.getItem(this.storageKey)}catch(t){e.handleError(t)}this.data=t?JSON.parse(t):{}},"loadData"));a(this,"saveData",n(()=>{try{localStorage.setItem(this.storageKey,JSON.stringify(this.data));this.triggerSaveEvent()}catch(t){e.handleError(t)}},"saveData"));a(this,"setValue",n((e,t)=>{this.data[e]=t;this.saveData()},"setValue"));a(this,"addValue",n((e,t)=>{if(!this.data[e]){this.data[e]=[]}if(typeof t==="string"&&!this.data[e].includes(t)){this.data[e].push(t);this.saveData()}},"addValue"));a(this,"getValue",n(e=>this.data[e]||null,"getValue"));a(this,"getValues",n(e=>this.data[e]||null,"getValues"));a(this,"removeValue",n((e,t)=>{if(this.data[e]){const n=this.data[e].indexOf(t);if(n>-1){this.data[e].splice(n,1);this.saveData()}}},"removeValue"));this.data={};this.storageKey=t;this.loadData();addEventListener(this.saveEventKey,this.loadOnChange)}static handleError(e){if(e instanceof ReferenceError){}else{throw e}}};n(s,"LocalStorageManager");var o=s;(Drupal=>{Drupal.behaviors.closableAnnouncements={attach:n(function e(){const t="js-announcement";const a="js-announcement--hide";const s="js-announcement__close--disabled";const l="hidden-helfi-announcements";const i=new o("helfi-settings");function r(e){const{uuid:t}=e.dataset;if(t){i.addValue(l,t)}}n(r,"addToAnnouncementStorage");function c(e){r(e);e.style=`--js-announcement-height: ${e.offsetHeight}px`;window.setTimeout(()=>{let t=false;const n=document.querySelectorAll(".announcement:not(.js-announcement--hide)");e.classList.add(a);for(let a=0,s=n.length;a<s;a++){if(n[a].dataset.uuid===e.dataset.uuid&&a>0){const e=n[a-1].querySelectorAll(".announcement__close, .announcement__link a");e[e.length-1].focus();t=true;break}}if(t===false){const e=document.querySelector(".header-bottom .desktop-menu > .menu");const t=window.getComputedStyle(e).display==="none";if(t===true){const e=document.querySelectorAll(".nav-toggle__button, .breadcrumb a:last-of-type");e[e.length-1].focus()}else{const e=document.querySelectorAll(".nav-toggle__button, .header-bottom .menu--level-0 > .menu__item:last-child > .menu__link-wrapper :where(a, button), .breadcrumb a:last-of-type");e[e.length-1].focus()}}},1)}n(c,"closeAnnouncement");function u(e){const n=e.target.closest(`.${t}`);c(n)}n(u,"triggerAnnouncementClose");function d(){const e=document.querySelectorAll(`.${s}`);for(let t=0;t<e.length;t++){const n=e[t];n.addEventListener("click",u);n.classList.remove(s)}}n(d,"enableAnnouncementClosing");window.unhideAnnouncements=n(function e(){i.removeValue(l);window.location.reload()},"unhideAnnouncements");d()},"attach")}})(Drupal)})();