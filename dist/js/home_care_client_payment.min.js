!function(){"use strict";var e={getFormData:function(e,i,{firstPerWeekPrice:a,othersPerWeekPrice:t}){return{form_id:e,has_required_fields:!0,items:[{input_integer:{id:"household_size",label:i("household_size"),unit:i("unit_person"),min:1,max:6,size:2,required:!0,helper_text:i("household_size_explanation")}},{input_float:{id:"gross_income_per_month",label:i("gross_income_per_month"),unit:i("unit_euro"),min:0,size:8,required:!1,strip:"[€eE ]",helper_text:i("gross_income_per_month_explanation")}},{input_integer:{id:"monthly_usage",label:i("monthly_usage"),unit:i("unit_hour"),min:0,max:744,size:3,required:!0,helper_text:i("monthly_usage_explanation")}},{heading:{text:i("living_at_home_heading"),level:3}},{paragraph:{text:i("living_at_home_paragraph")}},{heading:{text:i("safetyphone_heading"),level:3}},{paragraph:{text:i("safetyphone_paragraph")}},{radio:{id:"safetyphone",label:i("safetyphone"),required:!0,radio_items:[{name:"safetyphone",item_id:"safetyphone_1",label:i("yes_calculate"),value:1},{name:"safetyphone",item_id:"safetyphone_2",label:i("no"),value:2}]}},{heading:{text:i("shopping_service_heading"),level:3}},{paragraph:{text:i("shopping_service_paragraph")}},{radio:{id:"shopping_service",label:i("shopping_service"),required:!0,radio_items:[{name:"shopping_service",item_id:"shopping_service_1",label:i("yes_calculate"),value:1},{name:"shopping_service",item_id:"shopping_service_2",label:i("no"),value:2}]}},{group:{id:"shopping_service_group",hide_group:!0,items:[{input_integer:{id:"shopping_service_per_week",label:i("shopping_service_per_week"),unit:i("unit_amount"),min:1,size:2,required:!0,helper_text:i("shopping_service_per_week_explanation",{first_per_week_price:a,others_per_week_price:t})}}]}},{heading:{text:i("meal_service_heading"),level:3}},{paragraph:{text:i("meal_service_paragraph")}},{radio:{id:"meal_service",label:i("meal_service"),required:!0,radio_items:[{name:"meal_service",item_id:"meal_service_1",label:i("yes_calculate"),value:1},{name:"meal_service",item_id:"meal_service_2",label:i("no"),value:2}]}},{group:{id:"meal_service_group",hide_group:!0,items:[{input_integer:{id:"meal_service_per_week",label:i("meal_service_per_week"),unit:i("unit_amount"),min:1,max:7,size:2,required:!0,helper_text:i("meal_service_per_week_explanation")}}]}}]}}};var i={household_size:{fi:"Talouden koko",sv:null,en:null},household_size_explanation:{fi:"Samassa osoitteessa asuvien perheenjäsenten määrä.",sv:null,en:null},gross_income_per_month:{fi:"Talouden bruttotulot kuukaudessa",sv:null,en:null},gross_income_per_month_explanation:{fi:"Koko talouden yhteenlasketut ansio- ja pääomatulot ennen verojen vähentämistä. Tuloihin lasketaan palkka, eläke-, vuokra- ja korkotulot sekä eläkkeensaajan hoitotuki. Jos jätät kentän tyhjäksi, lasketaan arvio korkeimman maksun mukaisesti.",sv:null,en:null},monthly_usage:{fi:"Kotihoidon tuntimäärä kuukaudessa",sv:null,en:null},monthly_usage_explanation:{fi:"Löydät tuntimäärän kotihoidon hoito- ja palvelusuunnitelmasta.",sv:null,en:null},living_at_home_heading:{fi:"Kotona asumista tukevat palvelut",sv:null,en:null},living_at_home_paragraph:{fi:"Voit laskea mukaan kotona asumista tukevia palveluja. Tukipalvelut ovat maksullisia.",sv:null,en:null},safetyphone_heading:{fi:"Turvapuhelin ja turvaranneke",sv:null,en:null},safetyphone_paragraph:{fi:"Turvapuhelinpalveluun kuuluu turvapuhelin ja turvaranneke, joilla saat tarvittaessa apua ympäri vuorokauden. Turvapuhelinpalvelun maksut riippuvat talouden tuloista.",sv:null,en:null},safetyphone:{fi:"Laske arvioon turvapuhelin ja turvaranneke",sv:null,en:null},yes_calculate:{fi:"Kyllä, laske arvioon.",sv:null,en:null},no:{fi:"Ei",sv:null,en:null},shopping_service_heading:{fi:"Kauppapalvelu",sv:null,en:null},shopping_service_paragraph:{fi:"Kauppapalvelussa tilaamasi ruokaostokset toimitetaan kotiovellesi. Palvelussa on toimitusmaksu.",sv:null,en:null},shopping_service:{fi:"Laske arvioon kauppapalvelu",sv:null,en:null},shopping_service_per_week:{fi:"Kauppapalvelun toimitusten määrä viikossa",sv:null,en:null},shopping_service_per_week_explanation:{fi:"Yksi toimitus viikossa maksaa ${first_per_week_price} euroa, muut toimitukset ${others_per_week_price} euroa per toimitus.",sv:null,en:null},meal_service_heading:{fi:"Ateriapalvelu",sv:null,en:null},meal_service_paragraph:{fi:"Ateriapalvelussa kotiisi kuljetetaan valmiita aterioita, jotka voit itse lämmittää. Ateriapalvelun hintaan kuuluu aterian hinta ja kuljetusmaksu.",sv:null,en:null},meal_service:{fi:"Laske arvioon ateriapalvelu",sv:null,en:null},meal_service_per_week:{fi:"Aterioiden määrä viikossa",sv:null,en:null},meal_service_per_week_explanation:{fi:"Voit tilata ateriapalvelun hinnaston mukaisia aterioita enintään 7 ateriaa viikossa.",sv:null,en:null},receipt_estimate_of_payment:{fi:"Arvio kotihoidon asiakasmaksusta",sv:null,en:null},receipt_family_estimated_payment_prefix:{fi:"Arvioitu asiakasmaksu on yhteensä",sv:null,en:null},receipt_family_estimated_payment_suffix:{fi:"euroa kuukaudessa.",sv:null,en:null},receipt_family_estimated_payment_explanation_min:{fi:"Alle ${minimum_payment_euro} euron maksuja ei laskuteta. ",sv:null,en:null},receipt_family_empty_income:{fi:"Arvio on laskettu korkeimman maksun mukaisesti, koska et täyttänyt laskuriin talouden kuukausituloja. ",sv:null,en:null},receipt_family_estimated_payment_explanation:{fi:"Tämä arvio on suuntaa antava. Tarkan arvon saat kotihoidon päätöksessä.",sv:null,en:null},receipt_estimate_is_based_on:{fi:"Arvio muodostuu seuraavista tiedoista:",sv:null,en:null},receipt_subtotal_euros_per_month:{fi:"${value} €/kk",sv:null,en:null},receipt_subtotal_euros_per_month_screenreader:{fi:"${value} euroa kuukaudessa",sv:null,en:null},receipt_additional_details:{fi:"Lisähuomiot:",sv:null,en:null},receipt_homecare_payment:{fi:"Kotihoidon asiakasmaksu",sv:null,en:null},receipt_homecare_payment_two_or_more:{fi:"Jos molemmat puolisot ovat jatkuvan ja säännöllisen kotihoidon kuukausimaksuasiakkaita, maksu jakautuu kummallekin palvelu- ja hoitosuunnitelman mukaisesti.",sv:null,en:null},receipt_shopping_service_math_single:{fi:"1 toimitus viikossa eli 4 toimitusta kuukaudessa.",sv:null,en:null},receipt_shopping_service_math_multiple:{fi:"${delivery_count_per_week} toimitusta viikossa eli ${delivery_count_per_month} toimitusta kuukaudessa.",sv:null,en:null},receipt_shopping_service_explanation:{fi:"Kunkin viikon ensimmäinen toimitus maksaa ${first_per_week} euroa. Muut saman viikon toimitukset maksavat kukin ${others_per_week} euroa.",sv:null,en:null},receipt_shopping_service_algorithm:{fi:"Laskuri laskee kuljetukset tasaisesti viikoille, mutta voit itse vaikuttaa kauppatoimitusten määrään tarpeesi mukaan.",sv:null,en:null},receipt_aria_live:{fi:"Kotihoidon asiakasmaksun arvio on ${payment} euroa kuukaudessa, lue lisätietoja lomakkeen alta.",sv:null,en:null},receipt_meal_service_count_single:{fi:"1 ateria viikossa eli 4 ateriaa kuukaudessa.",sv:null,en:null},receipt_meal_service_count_multiple:{fi:"${meals_per_week} ateriaa viikossa eli ${meals_per_month} ateriaa kuukaudessa",sv:null,en:null},receipt_meal_service_price:{fi:"Yksittäisen aterian hinta on ${meal_service_price} euroa. Lämpimän aterian lisäksi voit tilata maksullisen jälkiruuan.",sv:null,en:null},receipt_meal_service_1_delivery_price:{fi:"Hintaan on laskettu yksi kuljetusmaksu viikossa eli 4 kuljetusta kuukaudessa. Kukin kuljetus maksaa ${meal_service_delivery_price} euroa.",sv:null,en:null},receipt_meal_service_2_delivery_price:{fi:"Hintaan on laskettu kaksi kuljetusmaksua eli 8 kuljetusta kuukaudessa. Kukin kuljetus maksaa ${meal_service_delivery_price} euroa.",sv:null,en:null},receipt_meal_service_menumat_notice:{fi:"Ateriapalvelun sijaan voit tilata kotiisi pakastimen ja uunin yhdistelmän eli Menumat-ateria-automaatin. Menumat-palvelussa aterian hinta on ${menumat_price} euroa ja palvelumaksu on ${menumat_device_price} euroa vuorokaudessa. Aterian lisäksi voit tilata maksullisen jälkiruoan.",sv:null,en:null}};class a{constructor(a,t){this.id=a;const s=JSON.parse(t),l=()=>{"1"===this.calculator.getFieldValue("shopping_service")?this.calculator.showGroup("shopping_service_group"):this.calculator.hideGroup("shopping_service_group");"1"===this.calculator.getFieldValue("meal_service")?this.calculator.showGroup("meal_service_group"):this.calculator.hideGroup("meal_service_group")},n=(e,i,a)=>{const t=this.calculator.getMinimumRange(e,a);return{grossIncomeLimit:t.gross_income_limit,paymentPercentage:this.calculator.getMinimumRange(i,t.monthly_usage_percentage)}},r=()=>{const e=[];e.push(...this.calculator.validateBasics("household_size")),e.push(...this.calculator.validateBasics("gross_income_per_month")),e.push(...this.calculator.validateBasics("monthly_usage")),e.push(...this.calculator.validateBasics("safetyphone")),e.push(...this.calculator.validateBasics("shopping_service"));const i=this.calculator.getFieldValue("shopping_service");"1"===i&&e.push(...this.calculator.validateBasics("shopping_service_per_week")),e.push(...this.calculator.validateBasics("meal_service"));const a=this.calculator.getFieldValue("meal_service");if("1"===a&&e.push(...this.calculator.validateBasics("meal_service_per_week")),e.length)return{error:{title:this.t("missing_input"),message:e}};const t=Number(this.calculator.getFieldValue("household_size")),l=Number(this.calculator.getFieldValue("gross_income_per_month")),r=this.calculator.getFieldValue("gross_income_per_month"),u=Number(this.calculator.getFieldValue("monthly_usage")),o=this.calculator.getFieldValue("safetyphone"),_=Number(this.calculator.getFieldValue("shopping_service_per_week")),p=Number(this.calculator.getFieldValue("meal_service_per_week"));let c=this.t("receipt_family_estimated_payment_explanation");const m=this.calculator.getMinimumRange(u,s.monthly_usage_max_payment),{grossIncomeLimit:h,paymentPercentage:v}=n(t,u,s.household_size);let k=m;null!==r?k=v/100*(l-h):c=this.t("receipt_family_empty_income")+c;const d=this.calculator.clamp(0,k,m),g={title:this.t("receipt_homecare_payment"),has_details:!1,details:[],sum:this.t("receipt_subtotal_euros_per_month",{value:this.calculator.formatFinnishEuroCents(d)}),sum_screenreader:this.t("receipt_subtotal_euros_per_month_screenreader",{value:this.calculator.formatEuroCents(d)})};t>=2&&(g.has_details=!0,g.details.push(this.t("receipt_homecare_payment_two_or_more")));const f=[g],y=[];let w=0;if("1"===o){const e=this.calculator.getMinimumRange(t,s.safetyphone_limits),i=null===r?1/0:l;w=this.calculator.getMinimumRange(i,e),f.push({title:this.t("safetyphone_heading"),has_details:!1,details:[],sum:this.t("receipt_subtotal_euros_per_month",{value:this.calculator.formatFinnishEuroCents(w)}),sum_screenreader:this.t("receipt_subtotal_euros_per_month_screenreader",{value:this.calculator.formatEuroCents(w)})})}let x=0,j=0;"1"===i&&(x=s.shopping_service_prices.first_per_week,x+=(_-1)*s.shopping_service_prices.others_per_week,j=4*x,f.push({title:this.t("shopping_service_heading"),has_details:!0,details:[this.t(1===_?"receipt_shopping_service_math_single":"receipt_shopping_service_math_multiple",{delivery_count_per_week:_,delivery_count_per_month:4*_}),this.t("receipt_shopping_service_explanation",{first_per_week:this.calculator.formatFinnishEuroCents(s.shopping_service_prices.first_per_week),others_per_week:this.calculator.formatFinnishEuroCents(s.shopping_service_prices.others_per_week)}),this.t("receipt_shopping_service_algorithm")],sum:this.t("receipt_subtotal_euros_per_month",{value:this.calculator.formatFinnishEuroCents(j)}),sum_screenreader:this.t("receipt_subtotal_euros_per_month_screenreader",{value:this.calculator.formatEuroCents(j)})}));let b=0,F=0,P=0;"1"===a&&(b=p*s.meal_service_prices.lunch,F=p<=s.meal_service_prices.max_meals_for_single_delivery_per_week?1:2,b+=F*s.meal_service_prices.delivery,P=4*b,f.push({title:this.t("meal_service_heading"),has_details:!0,details:[this.t(1===p?"receipt_meal_service_count_single":"receipt_meal_service_count_multiple",{meals_per_week:p,meals_per_month:4*p}),this.t("receipt_meal_service_price",{meal_service_price:this.calculator.formatFinnishEuroCents(s.meal_service_prices.lunch),meal_deliveries_per_week:F,meal_deliveries_per_month:4*F}),this.t(`receipt_meal_service_${F}_delivery_price`,{meal_service_delivery_price:this.calculator.formatFinnishEuroCents(s.meal_service_prices.delivery)})],sum:this.t("receipt_subtotal_euros_per_month",{value:this.calculator.formatFinnishEuroCents(P)}),sum_screenreader:this.t("receipt_subtotal_euros_per_month_screenreader",{value:this.calculator.formatEuroCents(P)})}),y.push({title:this.t("receipt_additional_details"),text:this.t("receipt_meal_service_menumat_notice",{menumat_price:this.calculator.formatFinnishEuroCents(s.meal_service_prices.menumat.lunch),menumat_device_price:this.calculator.formatFinnishEuroCents(s.meal_service_prices.menumat.device_per_day)})})),console.log("maximumPayment",m,"\ngrossIncomeLimit",h,"\ngrossIncomeLimit",h,"\npaymentPercentage",v,"\nreferencePayment",k,"\n","\npayment",d,"\nsafetyphonePayment",w,"\nshoppingPaymentPerMonth",j,`(${x} € * 4 weeks)`,"\nmealPaymentPerMonth",P,`(${b} € * 4 weeks)`);const $=d+w+j+P,E={id:this.id,title:this.t("receipt_estimate_of_payment"),total_prefix:this.t("receipt_family_estimated_payment_prefix"),total_value:this.calculator.formatFinnishEuroCents($),total_suffix:this.t("receipt_family_estimated_payment_suffix"),total_explanation:c,hr:!0,breakdown:{title:this.t("receipt_estimate_is_based_on"),subtotals:f,additional_details:y}};return{receipt:this.calculator.getPartialRender("{{>receipt}}",E),ariaLive:this.t("receipt_aria_live",{payment:$})}},u={submit:e=>{this.calculator.clearResult(),e.preventDefault();const i=r();this.calculator.renderResult(i)},keydown:()=>{l()},change:()=>{l()},reset:()=>{window.setTimeout(l,1),this.calculator.clearResult(),this.calculator.showAriaLiveText(this.t("reset_aria_live"))}};this.calculator=window.HelfiCalculator({name:"home_care_client_payment",translations:i}),this.t=(e,i)=>this.calculator.translate(e,i),this.settings=this.calculator.parseSettings(t),this.calculator.init({id:a,formData:(()=>e.getFormData(this.id,this.t,{firstPerWeekPrice:s.shopping_service_prices.first_per_week,othersPerWeekPrice:s.shopping_service_prices.others_per_week}))(),eventHandlers:u})}}window.helfi_calculator=window.helfi_calculator||{},window.helfi_calculator.home_care_client_payment=(e,i)=>new a(e,i)}();