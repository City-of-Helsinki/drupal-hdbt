(()=>{var e=Object.defineProperty;var t=(t,s,i)=>s in t?e(t,s,{enumerable:true,configurable:true,writable:true,value:i}):t[s]=i;var s=(t,s)=>e(t,"name",{value:s,configurable:true});var i=(e,s,i)=>t(e,typeof s!=="symbol"?s+"":s,i);var o=class e{constructor(t,o,n,a){i(this,"open",s(()=>{this._isOpen=true;this.setAriaOpen();this.setHidden();this.parentCallback();this.localState.saveAccordionItemState(this.id,this.isOpen)},"open"));i(this,"close",s(()=>{this._isOpen=false;this.setAriaOpen();this.changeFocus();this.setHidden();this.parentCallback();this.localState.saveAccordionItemState(this.id,this.isOpen)},"close"));i(this,"closeWithoutFocus",s(()=>{this._isOpen=false;this.setAriaOpen();this.setHidden();this.parentCallback();this.localState.saveAccordionItemState(this.id,this.isOpen)},"closeWithoutFocus"));i(this,"toggle",s(t=>{if(!e.isClick(t.which)){return}this.isOpen?this.close():this.open()},"toggle"));i(this,"handleLinkAnchor",s(e=>{if(!e||e.length===0)return;const t=this.element.querySelector(e);if(t){this.open();t.scrollIntoView()}},"handleLinkAnchor"));i(this,"setAriaOpen",s(()=>{e.ariaExpandedElements.forEach(e=>{this.element.getElementsByClassName(e)[0].setAttribute("aria-expanded",this.isOpen)})},"setAriaOpen"));i(this,"setHidden",s(t=>{const s=this.element.closest(".accordion");const i=this.element.getElementsByClassName(e.contentElement)[0];if(t){s.style.setProperty("--js-accordion-open-time","0s");void document.body.offsetHeight;this.isOpen?i.removeAttribute("hidden"):i.hidden="until-found";setTimeout(()=>{s.style.removeProperty("--js-accordion-open-time")},10);return}if(!this.isOpen){const e=parseInt(getComputedStyle(s).getPropertyValue("--js-accordion-open-time"),10)||200;setTimeout(()=>{i.hidden="until-found"},e)}else{i.removeAttribute("hidden")}},"setHidden"));i(this,"changeFocus",s(()=>this.element.querySelector(`.${e.toggleElement}`).focus(),"changeFocus"));i(this,"addEventListeners",s(()=>{const t=this.element.getElementsByClassName(e.toggleElement)[0];t.addEventListener("mouseup",this.toggle);t.addEventListener("keypress",this.toggle);const s=this.element.getElementsByClassName(e.closeElement);const i=s[s.length-1];i.addEventListener("mouseup",this.close);i.addEventListener("keypress",this.close)},"addEventListeners"));this.element=t;this.localState=o;this.parentCallback=a;this._id=t.dataset.accordionId;this._isOpen=this.localState.loadAccordionItemState(this._id);this.setHidden(true);this.addEventListeners();this.handleLinkAnchor(n);this.setAriaOpen()}static isClick(e){return e===1||e===13||e===32}get id(){return this._id}get isOpen(){return this._isOpen}};s(o,"AccordionItem");i(o,"accordionItemElement","helfi-accordion-item");i(o,"toggleElement","accordion-item__button--toggle");i(o,"closeElement","accordion-item__button--close");i(o,"ariaExpandedElements",["accordion-item__button--toggle"]);i(o,"contentElement","accordion-item__content");var n=o;var a={open_all:{fi:"Avaa kaikki",en:"Open all",sv:"Öppna alla"},close_all:{fi:"Sulje kaikki",en:"Close all",sv:"Stäng alla"}};var l=a;var r=class e{};s(r,"ClientHelpers");i(r,"isCookieSet",s(e=>{const t=document.cookie;const s=t.split("; ");for(let t=0;t<s.length;t++){const i=s[t].split("=");if(i[0]===e){return true}}return false},"isCookieSet"));i(r,"getCurrentLanguage",s(()=>window.drupalSettings.path.currentLanguage,"getCurrentLanguage"));var c=r;var d=class e{constructor(t,o,a,r="default"){i(this,"initializeAccordion",s(()=>{const e=this.accordion.getElementsByClassName(n.accordionItemElement);this.isSingleItemAccordion=e.length===1;Array.from(e).forEach(e=>{this.accordionItems.push(new n(e,this.localState,this.urlHash,this.updateToggleButtonLabel))});if("onbeforematch"in document.body){this.enableHiddenUntilFound()}},"initializeAccordion"));i(this,"enableHiddenUntilFound",s(()=>{this.accordionItems.forEach(e=>{e.element.classList.add("accordion-item--hidden-until-found");const t=e.element.querySelector(".accordion-item__content");if(!e.isOpen){t.hidden="until-found"}e.element.addEventListener("beforematch",()=>{e.element.style.setProperty("--js-accordion-open-time","0s");void e.element.offsetHeight;e.open();setTimeout(()=>{e.element.style.removeProperty("--js-accordion-open-time")},10)})})},"enableHiddenUntilFound"));i(this,"addEventListeners",s(()=>{if(e.isHeaderless(this.type)||this.isSingleItemAccordion){return}const t=this.accordion.getElementsByClassName(e.toggleAllElement)[0];t.addEventListener("mouseup",this.toggleItems);t.addEventListener("keypress",this.toggleItems)},"addEventListeners"));i(this,"addChildAccordion",s(e=>{this.childAccordion=e},"addChildAccordion"));i(this,"showToggleButton",s(()=>{if(e.isHeaderless(this.type)||this.isSingleItemAccordion){this.accordion.getElementsByClassName(e.toggleAllElement)[0]?.classList.add("is-hidden")}else{this.accordion.getElementsByClassName(e.toggleAllElement)[0]?.classList.remove("is-hidden")}},"showToggleButton"));i(this,"updateToggleButtonLabel",s(()=>{const t=this.accordion.getElementsByClassName(e.toggleAllElement)[0];if(!t){return}this.areAllItemsOpen()?t.querySelector("span").textContent=l.close_all?.[this.currentLanguage]??l.close_all.en:t.querySelector("span").textContent=l.open_all?.[this.currentLanguage]??l.open_all.en;this.toggleAllLabelUpdate()},"updateToggleButtonLabel"));i(this,"getAccordionItemById",s(e=>this.accordionItems.find(t=>t.id===e),"getAccordionItemById"));i(this,"toggleItems",s(()=>this.areAllItemsOpen()?this.closeAll():this.openAll(),"toggleItems"));i(this,"openAll",s(()=>{this.accordionItems.forEach(e=>e.open());this.childAccordion?.openAll();this.updateToggleButtonLabel();this.toggleAllLabelUpdate()},"openAll"));i(this,"closeAll",s(()=>{this.accordionItems.forEach(e=>e.closeWithoutFocus());this.childAccordion?.closeAll();this.updateToggleButtonLabel();this.toggleAllLabelUpdate();const t=this.accordion.getElementsByClassName(e.toggleAllElement)[0];t.focus()},"closeAll"));i(this,"toggleAllLabelUpdate",s(()=>{const t=this.accordion.getElementsByClassName(e.toggleAllElement)[0];if(t&&this.areAllItemsOpen()){t.classList.remove(e.toggleAllClosed);t.classList.add(e.toggleAllOpen)}else{t.classList.remove(e.toggleAllOpen);t.classList.add(e.toggleAllClosed)}},"toggleAllLabelUpdate"));i(this,"areAllItemsOpen",s(()=>this.accordionItems?.every(e=>e.isOpen)&&this.areChildItemsOpen(),"areAllItemsOpen"));i(this,"areChildItemsOpen",s(()=>this.childAccordion?.areAllItemsOpen()??this.accordionItems?.every(e=>e.isOpen),"areChildItemsOpen"));i(this,"isHardcoded",s(()=>this.type==="hardcoded","isHardcoded"));this.type=r;this.isSingleItemAccordion=false;this.currentLanguage=c.getCurrentLanguage();this.accordion=t;this.localState=o;this.accordionItems=[];this.childAccordion=null;this.urlHash=a;this.initializeAccordion(a);this.addEventListeners();this.showToggleButton();this.updateToggleButtonLabel()}};s(d,"HelfiAccordion");i(d,"accordionWrapper","component--accordion");i(d,"toggleAllElement","js-accordion__button--toggle-all");i(d,"toggleAllOpen","accordion__button--is-open");i(d,"toggleAllClosed","accordion__button--is-closed");i(d,"headerlessTypes",["headerless","hardcoded"]);i(d,"isHeaderless",s(e=>d.headerlessTypes.includes(e),"isHeaderless"));var h=d;var g=class e{constructor(t){i(this,"saveEventKey","localstorage-save-event");i(this,"loadOnChange",s(()=>{this.loadData()},"loadOnChange"));i(this,"triggerSaveEvent",s(()=>{dispatchEvent(new CustomEvent(this.saveEventKey))},"triggerSaveEvent"));i(this,"loadData",s(()=>{let t=null;try{t=localStorage.getItem(this.storageKey)}catch(t){e.handleError(t)}this.data=t?JSON.parse(t):{}},"loadData"));i(this,"saveData",s(()=>{try{localStorage.setItem(this.storageKey,JSON.stringify(this.data));this.triggerSaveEvent()}catch(t){e.handleError(t)}},"saveData"));i(this,"setValue",s((e,t)=>{this.data[e]=t;this.saveData()},"setValue"));i(this,"addValue",s((e,t)=>{if(!this.data[e]){this.data[e]=[]}if(typeof t==="string"&&!this.data[e].includes(t)){this.data[e].push(t);this.saveData()}},"addValue"));i(this,"getValue",s(e=>this.data[e]||null,"getValue"));i(this,"getValues",s(e=>this.data[e]||null,"getValues"));i(this,"removeValue",s((e,t)=>{if(this.data[e]){const s=this.data[e].indexOf(t);if(s>-1){this.data[e].splice(s,1);this.saveData()}}},"removeValue"));this.data={};this.storageKey=t;this.loadData();addEventListener(this.saveEventKey,this.loadOnChange)}static handleError(e){if(e instanceof ReferenceError){}else{throw e}}};s(g,"LocalStorageManager");var u=g;var m=class e{constructor(){i(this,"getAccordionStorageKey",s(()=>`${this.site}-accordion`,"getAccordionStorageKey"));i(this,"saveAccordionItemState",s((e,t)=>{if(!this.site)return false;if(!this.siteAccordionStates[this.page])this.siteAccordionStates[this.page]={};if(t===false){delete this.siteAccordionStates[this.page][e]}else{this.siteAccordionStates[this.page][e]=t}this.storageManager.setValue(this.getAccordionStorageKey(),JSON.stringify(this.siteAccordionStates))},"saveAccordionItemState"));i(this,"loadAccordionItemState",s(e=>{if(this.AccordionsOpen)return true;if(!this.site)return false;return!!this.pageAccordionStates[e]},"loadAccordionItemState"));this.storageManager=new u("helfi-settings");this.site=window.drupalSettings.helfi_instance_name||"";this.page=window.drupalSettings.path.currentPath;this.siteAccordionStates=JSON.parse(this.storageManager.getValue(this.getAccordionStorageKey()))||{};this.pageAccordionStates=this.siteAccordionStates[this.page]||{};this.AccordionsOpen=c.isCookieSet("helfi_accordions_open")}};s(m,"AccordionState");var p=m;var A=class e{constructor(){e.handleTableOfContentsHash()}};s(A,"Events");i(A,"handleTableOfContentsHash",s(()=>{window.addEventListener("hashchange",()=>{const{hash:e}=window.location;if(!e||e.length<2){return}let t=false;window.helfiAccordions.forEach(s=>{const i=s.getAccordionItemById(e.replace("#",""));if(i){t=true;i.handleLinkAnchor(e)}});if(!t){const t=document.querySelector(`${e}`);if(!t){return}const s=t.closest(`.${n.accordionItemElement}`);if(s){window.helfiAccordions.forEach(e=>{const t=s.querySelector(".helfi-accordion__header").id;const i=e.getAccordionItemById(t);if(i){i.handleLinkAnchor()}})}}})},"handleTableOfContentsHash"));var f=A;window.helfiAccordions=[];var v=new p;var y=new f;var{hash:E}=window.location;var S=s(e=>{if(e.includes("component--no-header")){return"headerless"}if(e.includes("component--hardcoded")){return"hardcoded"}return"default"},"getAccordionType");var I=s((e,t)=>{const s=document.querySelectorAll(`.${h.accordionWrapper}`);if(s.length>window.helfiAccordions.length){try{s.forEach((e,t)=>{const s=S(Array.from(e.classList));const i=h.isHeaderless(s);const o=t===0&&s!=="hardcoded"?"default":s;const n=new h(e,v,E,o);window.helfiAccordions.push(n);if(!n.isHardcoded(s)&&i&&t>0){window.helfiAccordions[t-1].addChildAccordion(n)}})}catch(e){console.error(e);t.disconnect()}}},"callback");var O=document.body;var L={attributes:true,childList:true,subtree:true};var b=new MutationObserver(I);b.observe(O,L)})();