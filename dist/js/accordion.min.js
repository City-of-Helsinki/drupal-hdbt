!function(){"use strict";var e={8529:function(e,t,s){s.d(t,{Z:function(){return i}});class i{static accordionItemElement="helfi-accordion-item";static toggleElement="accordion-item__button--toggle";static closeElement="accordion-item__button--close";static ariaExpandedElements=["accordion-item__button--toggle"];static contentElement="accordion-item__content";constructor(e,t,s,i){this.element=e,this.localState=t,this.parentCallback=i,this._id=e.querySelector(".helfi-accordion__header").id,this._isOpen=this.localState.loadItemState(this._id),this.element.style="--js-accordion-open-time:0s",this.setHidden(),this.addEventListeners(),this.handleLinkAnchor(s),this.setAriaOpen(),this.element.style=null}open=()=>{this._isOpen=!0,this.setAriaOpen(),this.setHidden(),this.parentCallback(),this.localState.saveItemState(this.id,this.isOpen)};close=()=>{this._isOpen=!1,this.setAriaOpen(),this.changeFocus(),this.setHidden(),this.parentCallback(),this.localState.saveItemState(this.id,this.isOpen)};closeWithoutFocus=()=>{this._isOpen=!1,this.setAriaOpen(),this.setHidden(),this.parentCallback(),this.localState.saveItemState(this.id,this.isOpen)};toggle=e=>{i.isClick(e.which)&&(this.isOpen?this.close():this.open())};handleLinkAnchor=e=>{if(!e)return;const t=this.element.querySelector(e);t&&(this.open(),t.scrollIntoView())};setAriaOpen=()=>{i.ariaExpandedElements.forEach((e=>{this.element.getElementsByClassName(e)[0].setAttribute("aria-expanded",this.isOpen)}))};setHidden=()=>{const e=this.element.getElementsByClassName(i.contentElement)[0];this.isOpen?e.classList.remove("is-hidden"):e.classList.add("is-hidden")};changeFocus=()=>this.element.querySelector(`.${i.toggleElement}`).focus();addEventListeners=()=>{const e=this.element.getElementsByClassName(i.toggleElement)[0];e.addEventListener("mouseup",this.toggle),e.addEventListener("keypress",this.toggle);const t=this.element.getElementsByClassName(i.closeElement)[0];t.addEventListener("mouseup",this.close),t.addEventListener("keypress",this.close)};static isClick(e){return 1===e||13===e||32===e}get id(){return this._id}get isOpen(){return this._isOpen}}},297:function(e,t,s){s.d(t,{Z:function(){return a}});var i=s(8529);var n={open_all:{fi:"Avaa kaikki",en:"Open all",sv:"Öppna alla"},close_all:{fi:"Sulje kaikki",en:"Close all",sv:"Stäng alla"}},o=s(7927);class a{static accordionWrapper="component--accordion";static toggleAllElement="js-accordion__button--toggle-all";static toggleAllOpen="accordion__button--is-open";static toggleAllClosed="accordion__button--is-closed";static headerlessTypes=["headerless","hardcoded"];constructor(e,t,s,i="default"){this.type=i,this.isSingleItemAccordion=!1,this.currentLanguage=o.Z.getCurrentLanguage(),this.accordion=e,this.localState=t,this.accordionItems=[],this.childAccordion=null,this.urlHash=s,this.initializeAccordion(s),this.addEventListeners(),this.showToggleButton(),this.updateToggleButtonLabel()}initializeAccordion=()=>{const e=this.accordion.getElementsByClassName(i.Z.accordionItemElement);this.isSingleItemAccordion=1===e.length,Array.from(e).forEach((e=>{this.accordionItems.push(new i.Z(e,this.localState,this.urlHash,this.updateToggleButtonLabel))}))};addEventListeners=()=>{if(a.isHeaderless(this.type)||this.isSingleItemAccordion)return;const e=this.accordion.getElementsByClassName(a.toggleAllElement)[0];e.addEventListener("mouseup",this.toggleItems),e.addEventListener("keypress",this.toggleItems)};addChildAccordion=e=>{this.childAccordion=e};showToggleButton=()=>{a.isHeaderless(this.type)||this.isSingleItemAccordion?this.accordion.getElementsByClassName(a.toggleAllElement)[0]?.classList.add("is-hidden"):this.accordion.getElementsByClassName(a.toggleAllElement)[0]?.classList.remove("is-hidden")};updateToggleButtonLabel=()=>{const e=this.accordion.getElementsByClassName(a.toggleAllElement)[0];e&&(this.areAllItemsOpen()?e.querySelector("span").textContent=n.close_all?.[this.currentLanguage]??n.close_all.en:e.querySelector("span").textContent=n.open_all?.[this.currentLanguage]??n.open_all.en,this.toggleAllLabelUpdate())};getAccordionItemById=e=>this.accordionItems.find((t=>t.id===e));toggleItems=()=>this.areAllItemsOpen()?this.closeAll():this.openAll();openAll=()=>{this.accordionItems.forEach((e=>e.open())),this.childAccordion?.openAll(),this.updateToggleButtonLabel(),this.toggleAllLabelUpdate()};closeAll=()=>{this.accordionItems.forEach((e=>e.closeWithoutFocus())),this.childAccordion?.closeAll(),this.updateToggleButtonLabel(),this.toggleAllLabelUpdate();this.accordion.getElementsByClassName(a.toggleAllElement)[0].focus()};toggleAllLabelUpdate=()=>{const e=this.accordion.getElementsByClassName(a.toggleAllElement)[0];e&&this.areAllItemsOpen()?(e.classList.remove(a.toggleAllClosed),e.classList.add(a.toggleAllOpen)):(e.classList.remove(a.toggleAllOpen),e.classList.add(a.toggleAllClosed))};areAllItemsOpen=()=>this.accordionItems?.every((e=>e.isOpen))&&this.areChildItemsOpen();areChildItemsOpen=()=>this.childAccordion?.areAllItemsOpen()??this.accordionItems?.every((e=>e.isOpen));static isHeaderless=e=>a.headerlessTypes.includes(e);isHardcoded=()=>"hardcoded"===this.type}},7927:function(e,t,s){s.d(t,{Z:function(){return n}});var i=class{constructor(e){this.storageKey=e,this.loadData()}loadData(){const e=localStorage.getItem(this.storageKey);this.data=e?JSON.parse(e):{}}saveData(){localStorage.setItem(this.storageKey,JSON.stringify(this.data))}setValue(e,t){this.data[e]=t,this.saveData()}getValue(e){return this.data[e]||null}addValue(e,t){this.data[e]||(this.data[e]=[]),"string"!=typeof t||this.data[e].includes(t)||(this.data[e].push(t),this.saveData())}getValues(e){return this.data[e]||null}removeValue(e,t){if(this.data[e]){const s=this.data[e].indexOf(t);s>-1&&(this.data[e].splice(s,1),this.saveData())}}};class n{constructor(){this.storageManager=new i("helfi-settings"),this.site=window.drupalSettings.helfi_instance_name||"",this.page=window.drupalSettings.path.currentPath,this.siteAccordionStates=JSON.parse(this.storageManager.getValue(this.getStorageKey()))||{},this.pageAccordionStates=this.siteAccordionStates[this.page]||{},this.AccordionsOpen=n.isCookieSet("helfi_accordions_open")}static isCookieSet=e=>{const t=document.cookie.split("; ");for(let s=0;s<t.length;s++){if(t[s].split("=")[0]===e)return!0}return!1};getStorageKey=()=>`${this.site}-accordion`;saveItemState=(e,t)=>{if(!this.site)return!1;this.siteAccordionStates[this.page]||(this.siteAccordionStates[this.page]={}),this.siteAccordionStates[this.page][e]=t,this.storageManager.setValue(this.getStorageKey(),JSON.stringify(this.siteAccordionStates))};loadItemState=e=>!!this.site&&!!this.pageAccordionStates[e];static getCurrentLanguage=()=>window.drupalSettings.path.currentLanguage}}},t={};function s(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,s),o.exports}s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e=s(297),t=s(7927),i=s(8529);class n{constructor(){n.handleTableOfContentsHash()}static handleTableOfContentsHash=()=>{window.addEventListener("hashchange",(()=>{const{hash:e}=window.location;let t=!1;if(window.helfiAccordions.forEach((s=>{const i=s.getAccordionItemById(e.replace("#",""));i&&(t=!0,i.handleLinkAnchor(e))})),!t){const t=document.querySelector(`${e}`);if(!t)return;const s=t.closest(`.${i.Z.accordionItemElement}`);s&&window.helfiAccordions.forEach((e=>{const t=s.querySelector(".helfi-accordion__header").id,i=e.getAccordionItemById(t);i&&i.handleLinkAnchor()}))}}))}}window.helfiAccordions=[];const o=new t.Z,{hash:a}=(new n,window.location),l=document.body;new MutationObserver(((t,s)=>{const i=document.querySelectorAll(`.${e.Z.accordionWrapper}`);if(i.length>window.helfiAccordions.length)try{i.forEach(((t,s)=>{const i=(n=Array.from(t.classList)).includes("component--no-header")?"headerless":n.includes("component--hardcoded")?"hardcoded":"default";var n;const l=e.Z.isHeaderless(i),c=0===s&&"hardcoded"!==i?"default":i,r=new e.Z(t,o,a,c);window.helfiAccordions.push(r),!r.isHardcoded(i)&&l&&s>0&&window.helfiAccordions[s-1].addChildAccordion(r)}))}catch(e){console.error(e),s.disconnect()}})).observe(l,{attributes:!0,childList:!0,subtree:!0})}()}();