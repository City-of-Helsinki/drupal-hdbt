!function(){"use strict";class t{constructor(t){this.storageKey=t,this.loadData()}loadData(){const t=localStorage.getItem(this.storageKey);this.data=t?JSON.parse(t):{}}saveData(){localStorage.setItem(this.storageKey,JSON.stringify(this.data))}setValue(t,e){this.data[t]=e,this.saveData()}getValue(t){return this.data[t]||null}addValue(t,e){this.data[t]||(this.data[t]=[]),"string"!=typeof e||this.data[t].includes(e)||(this.data[t].push(e),this.saveData())}getValues(t){return this.data[t]||null}removeValue(t,e){if(this.data[t]){const s=this.data[t].indexOf(e);s>-1&&(this.data[t].splice(s,1),this.saveData())}}}!function(Drupal){Drupal.behaviors.closable_surveys={attach:function(){const e=document.getElementById("survey__container");if(!e)return;const s=document.documentElement,a=document.getElementById("survey__close-button"),o="hidden-helfi-surveys",n=new t("helfi-settings");let i=null;try{i=JSON.parse(window.localStorage.getItem("helfi-settings"))}catch(t){console.error("Error parsing local storage data:",t)}function l(){!function(){const{uuid:t}=e.dataset;t&&n.addValue(o,t)}(),e.remove(),s.classList.toggle("noscroll"),document.body.classList.toggle("noscroll"),document.body.style.removeProperty("padding-right")}a&&a.addEventListener("click",l),document.body.addEventListener("keydown",(function(t){"Escape"===t.key&&l()})),setTimeout((function(){const t=window.innerWidth-document.documentElement.clientWidth+"px",{uuid:a}=e.dataset;!a||!(i?.[o]||[]).includes(a)?(e.style.display="flex",s.classList.toggle("noscroll"),document.body.classList.toggle("noscroll"),document.body.style.paddingRight=t):e.remove()}),2e3)}}}(Drupal)}();