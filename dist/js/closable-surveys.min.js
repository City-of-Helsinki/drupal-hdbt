(()=>{var w=Object.defineProperty;var K=(a,t,n)=>t in a?w(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n;var o=(a,t)=>w(a,"name",{value:t,configurable:!0});var s=(a,t,n)=>K(a,typeof t!="symbol"?t+"":t,n);var l=class l{constructor(t){s(this,"saveEventKey","localstorage-save-event");s(this,"loadOnChange",o(()=>{this.loadData()},"loadOnChange"));s(this,"triggerSaveEvent",o(()=>{dispatchEvent(new CustomEvent(this.saveEventKey))},"triggerSaveEvent"));s(this,"loadData",o(()=>{let t=null;try{t=localStorage.getItem(this.storageKey)}catch(n){l.handleError(n)}this.data=t?JSON.parse(t):{}},"loadData"));s(this,"saveData",o(()=>{try{localStorage.setItem(this.storageKey,JSON.stringify(this.data)),this.triggerSaveEvent()}catch(t){l.handleError(t)}},"saveData"));s(this,"setValue",o((t,n)=>{this.data[t]=n,this.saveData()},"setValue"));s(this,"addValue",o((t,n)=>{this.data[t]||(this.data[t]=[]),typeof n=="string"&&!this.data[t].includes(n)&&(this.data[t].push(n),this.saveData())},"addValue"));s(this,"getValue",o(t=>this.data[t]||null,"getValue"));s(this,"getValues",o(t=>this.data[t]||null,"getValues"));s(this,"removeValue",o((t,n)=>{if(this.data[t]){let c=this.data[t].indexOf(n);c>-1&&(this.data[t].splice(c,1),this.saveData())}},"removeValue"));this.data={},this.storageKey=t,this.loadData(),addEventListener(this.saveEventKey,this.loadOnChange)}static handleError(t){if(!(t instanceof ReferenceError))throw t}};o(l,"LocalStorageManager");var u=l;(a=>{a.behaviors.closable_surveys={attach:o(function(){let n=document.getElementById("block-surveys"),c=document.getElementById("skip-to-main");n&&(c?c.parentNode.insertBefore(n,c.nextSibling):document.body.insertBefore(n,document.body.firstChild));let d=document.getElementById("helfi-survey__container");if(!d)return;let _=document.documentElement,k=2e3,v=document.querySelectorAll(".dialog__actions .dialog__action-button"),g="hidden-helfi-surveys",B=new u("helfi-settings"),m=null,h=null;try{m=JSON.parse(window.localStorage.getItem("helfi-settings"))}catch(e){console.error("Error parsing local storage data:",e)}function A(){let{uuid:e}=d.dataset;e&&B.addValue(g,e)}o(A,"addToSurveyStorage");function T(){h=window.focusTrap.createFocusTrap("#helfi-survey",{initialFocus:o(()=>"#helfi-survey__title","initialFocus")}),h.activate()}o(T,"addFocusTrap");function p(e){_.classList.toggle("noscroll",e)}o(p,"toggleNoScroll");function S(e){e?document.body.style.paddingRight=`${window.innerWidth-document.documentElement.clientWidth}px`:document.body.style.removeProperty("padding-right")}o(S,"setBodyPaddingRight");function E(){let e=document.querySelector(".hds-cc__target"),i=e?.shadowRoot?.querySelector(".hds-cc__all-cookies-button");e&&i&&i.focus()}o(E,"focusToCookieBanner");function y(){let e=document.querySelector(".dialog-off-canvas-main-canvas"),r=document.querySelector(".hds-cc__target"),i=document.querySelector(".skip-link--skip-to-main"),f=document.getElementById("helfi-survey__container");e&&!e.hasAttribute("inert")&&f?e.setAttribute("inert",""):e&&e.removeAttribute("inert"),i&&!i.hasAttribute("inert")&&f?i.setAttribute("inert",""):i&&i.removeAttribute("inert"),r&&!r.hasAttribute("inert")&&f?r.setAttribute("inert",""):r&&r.removeAttribute("inert")}o(y,"toggleOtherContentVisibility");function D(){let{uuid:e}=d.dataset,r=m?.[g]||[];!e||!r.includes(e)?(d.style.display="flex",S(!0),p(!0),T(),y()):(d.remove(),y(),E())}o(D,"showSurvey");function b(){A(),h.deactivate(),d.remove(),p(!1),S(!1),y(),E()}o(b,"removeSurvey"),v&&v.forEach(e=>e.addEventListener("click",b));function C(e){e.key==="Escape"&&b()}o(C,"handleEscapeKey"),document.body.addEventListener("keydown",C),setTimeout(D,k)},"attach")}})(Drupal);})();
