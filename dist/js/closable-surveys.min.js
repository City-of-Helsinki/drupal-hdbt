(()=>{var T=Object.defineProperty;var D=(a,t,o)=>t in a?T(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o;var n=(a,t,o)=>D(a,typeof t!="symbol"?t+"":t,o);var d=class a{constructor(t){n(this,"saveEventKey","localstorage-save-event");n(this,"loadOnChange",()=>{this.loadData()});n(this,"triggerSaveEvent",()=>{dispatchEvent(new CustomEvent(this.saveEventKey))});n(this,"loadData",()=>{let t=null;try{t=localStorage.getItem(this.storageKey)}catch(o){a.handleError(o)}this.data=t?JSON.parse(t):{}});n(this,"saveData",()=>{try{localStorage.setItem(this.storageKey,JSON.stringify(this.data)),this.triggerSaveEvent()}catch(t){a.handleError(t)}});n(this,"setValue",(t,o)=>{this.data[t]=o,this.saveData()});n(this,"addValue",(t,o)=>{this.data[t]||(this.data[t]=[]),typeof o=="string"&&!this.data[t].includes(o)&&(this.data[t].push(o),this.saveData())});n(this,"getValue",t=>this.data[t]||null);n(this,"getValues",t=>this.data[t]||null);n(this,"removeValue",(t,o)=>{if(this.data[t]){let r=this.data[t].indexOf(o);r>-1&&(this.data[t].splice(r,1),this.saveData())}});this.data={},this.storageKey=t,this.loadData(),addEventListener(this.saveEventKey,this.loadOnChange)}static handleError(t){if(!(t instanceof ReferenceError))throw t}};(a=>{a.behaviors.closable_surveys={attach:function(){let o=document.getElementById("block-surveys"),r=document.getElementById("skip-to-main");o&&(r?r.parentNode.insertBefore(o,r.nextSibling):document.body.insertBefore(o,document.body.firstChild));let c=document.getElementById("helfi-survey__container");if(!c)return;let E=document.documentElement,b=2e3,y=document.querySelectorAll(".dialog__actions .dialog__action-button"),f="hidden-helfi-surveys",w=new d("helfi-settings"),v=null,l=null;try{v=JSON.parse(window.localStorage.getItem("helfi-settings"))}catch(e){console.error("Error parsing local storage data:",e)}function _(){let{uuid:e}=c.dataset;e&&w.addValue(f,e)}function k(){l=window.focusTrap.createFocusTrap("#helfi-survey",{initialFocus:()=>"#helfi-survey__title"}),l.activate()}function g(e){E.classList.toggle("noscroll",e)}function m(e){e?document.body.style.paddingRight=`${window.innerWidth-document.documentElement.clientWidth}px`:document.body.style.removeProperty("padding-right")}function p(){let e=document.querySelector(".hds-cc__target"),s=e?.shadowRoot?.querySelector(".hds-cc__all-cookies-button");e&&s&&s.focus()}function u(){let e=document.querySelector(".dialog-off-canvas-main-canvas"),i=document.querySelector(".hds-cc__target"),s=document.querySelector(".skip-link--skip-to-main"),h=document.getElementById("helfi-survey__container");e&&!e.hasAttribute("inert")&&h?e.setAttribute("inert",""):e&&e.removeAttribute("inert"),s&&!s.hasAttribute("inert")&&h?s.setAttribute("inert",""):s&&s.removeAttribute("inert"),i&&!i.hasAttribute("inert")&&h?i.setAttribute("inert",""):i&&i.removeAttribute("inert")}function B(){let{uuid:e}=c.dataset,i=v?.[f]||[];!e||!i.includes(e)?(c.style.display="flex",m(!0),g(!0),k(),u()):(c.remove(),u(),p())}function S(){_(),l.deactivate(),c.remove(),g(!1),m(!1),u(),p()}y&&y.forEach(e=>e.addEventListener("click",S));function A(e){e.key==="Escape"&&S()}document.body.addEventListener("keydown",A),setTimeout(B,b)}}})(Drupal);})();
