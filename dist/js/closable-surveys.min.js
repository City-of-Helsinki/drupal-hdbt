!function(){"use strict";class t{constructor(t){this.data={},this.storageKey=t,this.loadData()}loadData(){let e=null;try{e=localStorage.getItem(this.storageKey)}catch(e){t.handleError(e)}this.data=e?JSON.parse(e):{}}saveData(){try{localStorage.setItem(this.storageKey,JSON.stringify(this.data))}catch(e){t.handleError(e)}}setValue(t,e){this.data[t]=e,this.saveData()}getValue(t){return this.data[t]||null}addValue(t,e){this.data[t]||(this.data[t]=[]),"string"!=typeof e||this.data[t].includes(e)||(this.data[t].push(e),this.saveData())}getValues(t){return this.data[t]||null}removeValue(t,e){if(this.data[t]){const a=this.data[t].indexOf(e);a>-1&&(this.data[t].splice(a,1),this.saveData())}}static handleError(t){if(!(t instanceof ReferenceError))throw t}}!function(Drupal){Drupal.behaviors.closable_surveys={attach:function(){const e=document.getElementById("block-surveys"),a=document.getElementById("skip-to-main");e&&(a?a.parentNode.insertBefore(e,a.nextSibling):document.body.insertBefore(e,document.body.firstChild));const n=document.getElementById("helfi-survey__container");if(!n)return;const s=document.documentElement,i=document.getElementById("helfi-survey__close-button"),o="hidden-helfi-surveys",r=new t("helfi-settings");let d=null,l=null;try{d=JSON.parse(window.localStorage.getItem("helfi-settings"))}catch(t){console.error("Error parsing local storage data:",t)}function c(t){s.classList.toggle("noscroll",t)}function u(t){if(t){const t=window.innerWidth-document.documentElement.clientWidth+"px";document.body.style.paddingRight=t}else document.body.style.removeProperty("padding-right")}function h(){!function(){const{uuid:t}=n.dataset;t&&r.addValue(o,t)}(),l.deactivate(),n.remove(),c(!1),u(!1)}i&&i.addEventListener("click",h),document.body.addEventListener("keydown",(function(t){"Escape"===t.key&&h()})),setTimeout((function(){const{uuid:t}=n.dataset;!t||!(d?.[o]||[]).includes(t)?(n.style.display="flex",u(!0),c(!0),l=window.focusTrap.createFocusTrap("#helfi-survey",{initialFocus:()=>"#helfi-survey__title"}),l.activate()):n.remove()}),2e3)}}}(Drupal)}();