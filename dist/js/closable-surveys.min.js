(()=>{var e=Object.defineProperty;var t=(t,a,n)=>a in t?e(t,a,{enumerable:true,configurable:true,writable:true,value:n}):t[a]=n;var a=(t,a)=>e(t,"name",{value:a,configurable:true});var n=(e,a,n)=>t(e,typeof a!=="symbol"?a+"":a,n);var i=class e{constructor(t){n(this,"saveEventKey","localstorage-save-event");n(this,"loadOnChange",a(()=>{this.loadData()},"loadOnChange"));n(this,"triggerSaveEvent",a(()=>{dispatchEvent(new CustomEvent(this.saveEventKey))},"triggerSaveEvent"));n(this,"loadData",a(()=>{let t=null;try{t=localStorage.getItem(this.storageKey)}catch(t){e.handleError(t)}this.data=t?JSON.parse(t):{}},"loadData"));n(this,"saveData",a(()=>{try{localStorage.setItem(this.storageKey,JSON.stringify(this.data));this.triggerSaveEvent()}catch(t){e.handleError(t)}},"saveData"));n(this,"setValue",a((e,t)=>{this.data[e]=t;this.saveData()},"setValue"));n(this,"addValue",a((e,t)=>{if(!this.data[e]){this.data[e]=[]}if(typeof t==="string"&&!this.data[e].includes(t)){this.data[e].push(t);this.saveData()}},"addValue"));n(this,"getValue",a(e=>this.data[e]||null,"getValue"));n(this,"getValues",a(e=>this.data[e]||null,"getValues"));n(this,"removeValue",a((e,t)=>{if(this.data[e]){const a=this.data[e].indexOf(t);if(a>-1){this.data[e].splice(a,1);this.saveData()}}},"removeValue"));this.data={};this.storageKey=t;this.loadData();addEventListener(this.saveEventKey,this.loadOnChange)}static handleError(e){if(e instanceof ReferenceError){}else{throw e}}};a(i,"LocalStorageManager");var s=i;var o=class e{};a(o,"ClientHelpers");n(o,"isCookieSet",a(e=>{const t=document.cookie;const a=t.split("; ");for(let t=0;t<a.length;t++){const n=a[t].split("=");if(n[0]===e){return true}}return false},"isCookieSet"));n(o,"getCurrentLanguage",a(()=>window.drupalSettings.path.currentLanguage,"getCurrentLanguage"));var r=o;(Drupal=>{Drupal.behaviors.closable_surveys={attach:a(function e(){const t=document.getElementById("block-surveys");const n=document.getElementById("dialog-off-canvas-main-canvas");if(t){if(n){n.parentNode.insertBefore(t,n.nextSibling)}else{document.body.insertBefore(t,document.body.lastChild)}}const i=document.getElementById("helfi-survey__container");if(!i)return;const o=document.documentElement;const l=2e3;const c=document.querySelectorAll(".dialog__actions .dialog__action-button");const u="hidden-helfi-surveys";const d=new s("helfi-settings");let h=null;let g=null;const f=r.isCookieSet("helfi_no_survey");try{h=JSON.parse(window.localStorage.getItem("helfi-settings"))}catch(e){console.error("Error parsing local storage data:",e)}function v(){const{uuid:e}=i.dataset;if(e){d.addValue(u,e)}}a(v,"addToSurveyStorage");function y(){g=window.focusTrap.createFocusTrap("#helfi-survey",{initialFocus:a(()=>"#helfi-survey__title","initialFocus")});g.activate()}a(y,"addFocusTrap");function m(e){o.classList.toggle("noscroll",e)}a(m,"toggleNoScroll");function p(e){if(e){document.body.style.paddingRight=`${window.innerWidth-document.documentElement.clientWidth}px`}else{document.body.style.removeProperty("padding-right")}}a(p,"setBodyPaddingRight");function b(){const e=document.querySelector(".hds-cc__target");const t=e?.shadowRoot;const a=t?.querySelector(".hds-cc__all-cookies-button");if(e&&a){a.focus()}}a(b,"focusToCookieBanner");function S(){const e=document.querySelector(".dialog-off-canvas-main-canvas");const t=document.querySelector(".hds-cc__target");const a=document.querySelector(".skip-link--skip-to-main");const n=document.getElementById("helfi-survey__container");if(e&&!e.hasAttribute("inert")&&n){e.setAttribute("inert","")}else{e&&e.removeAttribute("inert")}if(a&&!a.hasAttribute("inert")&&n){a.setAttribute("inert","")}else{a&&a.removeAttribute("inert")}if(t&&!t.hasAttribute("inert")&&n){t.setAttribute("inert","")}else{t&&t.removeAttribute("inert")}}a(S,"toggleOtherContentVisibility");function E(){const{uuid:e}=i.dataset;const t=h?.[u]||[];const a=!e||!t.includes(e);if(a){i.style.display="flex";p(true);m(true);y();S()}else{i.remove();S();b()}}a(E,"showSurvey");function _(){v();g.deactivate();i.remove();m(false);p(false);S();b()}a(_,"removeSurvey");if(c){c.forEach(e=>e.addEventListener("click",_))}function w(e){if(e.key==="Escape"){_()}}a(w,"handleEscapeKey");document.body.addEventListener("keydown",w);if(!f){setTimeout(E,l)}},"attach")}})(Drupal)})();