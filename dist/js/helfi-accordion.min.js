(()=>{var e=Object.defineProperty;var t=(t,s,i)=>s in t?e(t,s,{enumerable:true,configurable:true,writable:true,value:i}):t[s]=i;var s=(t,s)=>e(t,"name",{value:s,configurable:true});var i=(e,s,i)=>t(e,typeof s!=="symbol"?s+"":s,i);var a=class e{constructor(t,a,n,o){i(this,"open",s(()=>{this._isOpen=true;this.setAriaOpen();this.setHidden();this.parentCallback();this.localState.saveItemState(this.id,this.isOpen)},"open"));i(this,"close",s(()=>{this._isOpen=false;this.setAriaOpen();this.changeFocus();this.setHidden();this.parentCallback();this.localState.saveItemState(this.id,this.isOpen)},"close"));i(this,"closeWithoutFocus",s(()=>{this._isOpen=false;this.setAriaOpen();this.setHidden();this.parentCallback();this.localState.saveItemState(this.id,this.isOpen)},"closeWithoutFocus"));i(this,"toggle",s(t=>{if(!e.isClick(t.which)){return}this.isOpen?this.close():this.open()},"toggle"));i(this,"handleLinkAnchor",s(e=>{if(!e||e.length===0)return;const t=this.element.querySelector(e);if(t){this.open();t.scrollIntoView()}},"handleLinkAnchor"));i(this,"setAriaOpen",s(()=>{e.ariaExpandedElements.forEach(e=>{this.element.getElementsByClassName(e)[0].setAttribute("aria-expanded",this.isOpen)})},"setAriaOpen"));i(this,"setHidden",s(t=>{const s=this.element.closest(".accordion");const i=this.element.getElementsByClassName(e.contentElement)[0];if(t){s.style.setProperty("--js-accordion-open-time","0s");void document.body.offsetHeight;this.isOpen?i.removeAttribute("hidden"):i.hidden="until-found";setTimeout(()=>{s.style.removeProperty("--js-accordion-open-time")},10);return}if(!this.isOpen){const e=parseInt(getComputedStyle(s).getPropertyValue("--js-accordion-open-time"),10)||200;setTimeout(()=>{i.hidden="until-found"},e)}else{i.removeAttribute("hidden")}},"setHidden"));i(this,"changeFocus",s(()=>this.element.querySelector(`.${e.toggleElement}`).focus(),"changeFocus"));i(this,"addEventListeners",s(()=>{const t=this.element.getElementsByClassName(e.toggleElement)[0];t.addEventListener("mouseup",this.toggle);t.addEventListener("keypress",this.toggle);const s=this.element.getElementsByClassName(e.closeElement);const i=s[s.length-1];i.addEventListener("mouseup",this.close);i.addEventListener("keypress",this.close)},"addEventListeners"));this.element=t;this.localState=a;this.parentCallback=o;this._id=t.dataset.accordionId;this._isOpen=this.localState.loadItemState(this._id);this.setHidden(true);this.addEventListeners();this.handleLinkAnchor(n);this.setAriaOpen()}static isClick(e){return e===1||e===13||e===32}get id(){return this._id}get isOpen(){return this._isOpen}};s(a,"AccordionItem");i(a,"accordionItemElement","helfi-accordion-item");i(a,"toggleElement","accordion-item__button--toggle");i(a,"closeElement","accordion-item__button--close");i(a,"ariaExpandedElements",["accordion-item__button--toggle"]);i(a,"contentElement","accordion-item__content");var n=a;var o={open_all:{fi:"Avaa kaikki",en:"Open all",sv:"Öppna alla"},close_all:{fi:"Sulje kaikki",en:"Close all",sv:"Stäng alla"}};var l=o;var r=class e{constructor(t){i(this,"saveEventKey","localstorage-save-event");i(this,"loadOnChange",s(()=>{this.loadData()},"loadOnChange"));i(this,"triggerSaveEvent",s(()=>{dispatchEvent(new CustomEvent(this.saveEventKey))},"triggerSaveEvent"));i(this,"loadData",s(()=>{let t=null;try{t=localStorage.getItem(this.storageKey)}catch(t){e.handleError(t)}this.data=t?JSON.parse(t):{}},"loadData"));i(this,"saveData",s(()=>{try{localStorage.setItem(this.storageKey,JSON.stringify(this.data));this.triggerSaveEvent()}catch(t){e.handleError(t)}},"saveData"));i(this,"setValue",s((e,t)=>{this.data[e]=t;this.saveData()},"setValue"));i(this,"addValue",s((e,t)=>{if(!this.data[e]){this.data[e]=[]}if(typeof t==="string"&&!this.data[e].includes(t)){this.data[e].push(t);this.saveData()}},"addValue"));i(this,"getValue",s(e=>this.data[e]||null,"getValue"));i(this,"getValues",s(e=>this.data[e]||null,"getValues"));i(this,"removeValue",s((e,t)=>{if(this.data[e]){const s=this.data[e].indexOf(t);if(s>-1){this.data[e].splice(s,1);this.saveData()}}},"removeValue"));this.data={};this.storageKey=t;this.loadData();addEventListener(this.saveEventKey,this.loadOnChange)}static handleError(e){if(e instanceof ReferenceError){}else{throw e}}};s(r,"LocalStorageManager");var c=r;var h=class e{constructor(){i(this,"getStorageKey",s(()=>`${this.site}-accordion`,"getStorageKey"));i(this,"saveItemState",s((e,t)=>{if(!this.site)return false;if(!this.siteAccordionStates[this.page])this.siteAccordionStates[this.page]={};if(t===false){delete this.siteAccordionStates[this.page][e]}else{this.siteAccordionStates[this.page][e]=t}this.storageManager.setValue(this.getStorageKey(),JSON.stringify(this.siteAccordionStates))},"saveItemState"));i(this,"loadItemState",s(e=>{if(this.AccordionsOpen)return true;if(!this.site)return false;return!!this.pageAccordionStates[e]},"loadItemState"));this.storageManager=new c("helfi-settings");this.site=window.drupalSettings.helfi_instance_name||"";this.page=window.drupalSettings.path.currentPath;this.siteAccordionStates=JSON.parse(this.storageManager.getValue(this.getStorageKey()))||{};this.pageAccordionStates=this.siteAccordionStates[this.page]||{};this.AccordionsOpen=e.isCookieSet("helfi_accordions_open")}};s(h,"State");i(h,"isCookieSet",s(e=>{const t=document.cookie;const s=t.split("; ");for(let t=0;t<s.length;t++){const i=s[t].split("=");if(i[0]===e){return true}}return false},"isCookieSet"));i(h,"getCurrentLanguage",s(()=>window.drupalSettings.path.currentLanguage,"getCurrentLanguage"));var d=h;var g=class e{constructor(t,a,o,r="default"){i(this,"initializeAccordion",s(()=>{const e=this.accordion.getElementsByClassName(n.accordionItemElement);this.isSingleItemAccordion=e.length===1;Array.from(e).forEach(e=>{this.accordionItems.push(new n(e,this.localState,this.urlHash,this.updateToggleButtonLabel))});if("onbeforematch"in document.body){this.enableHiddenUntilFound()}},"initializeAccordion"));i(this,"enableHiddenUntilFound",s(()=>{this.accordionItems.forEach(e=>{e.element.classList.add("accordion-item--hidden-until-found");const t=e.element.querySelector(".accordion-item__content");if(!e.isOpen){t.hidden="until-found"}e.element.addEventListener("beforematch",()=>{e.element.style.setProperty("--js-accordion-open-time","0s");void e.element.offsetHeight;e.open();setTimeout(()=>{e.element.style.removeProperty("--js-accordion-open-time")},10)})})},"enableHiddenUntilFound"));i(this,"addEventListeners",s(()=>{if(e.isHeaderless(this.type)||this.isSingleItemAccordion){return}const t=this.accordion.getElementsByClassName(e.toggleAllElement)[0];t.addEventListener("mouseup",this.toggleItems);t.addEventListener("keypress",this.toggleItems)},"addEventListeners"));i(this,"addChildAccordion",s(e=>{this.childAccordion=e},"addChildAccordion"));i(this,"showToggleButton",s(()=>{if(e.isHeaderless(this.type)||this.isSingleItemAccordion){this.accordion.getElementsByClassName(e.toggleAllElement)[0]?.classList.add("is-hidden")}else{this.accordion.getElementsByClassName(e.toggleAllElement)[0]?.classList.remove("is-hidden")}},"showToggleButton"));i(this,"updateToggleButtonLabel",s(()=>{const t=this.accordion.getElementsByClassName(e.toggleAllElement)[0];if(!t){return}this.areAllItemsOpen()?t.querySelector("span").textContent=l.close_all?.[this.currentLanguage]??l.close_all.en:t.querySelector("span").textContent=l.open_all?.[this.currentLanguage]??l.open_all.en;this.toggleAllLabelUpdate()},"updateToggleButtonLabel"));i(this,"getAccordionItemById",s(e=>this.accordionItems.find(t=>t.id===e),"getAccordionItemById"));i(this,"toggleItems",s(()=>this.areAllItemsOpen()?this.closeAll():this.openAll(),"toggleItems"));i(this,"openAll",s(()=>{this.accordionItems.forEach(e=>e.open());this.childAccordion?.openAll();this.updateToggleButtonLabel();this.toggleAllLabelUpdate()},"openAll"));i(this,"closeAll",s(()=>{this.accordionItems.forEach(e=>e.closeWithoutFocus());this.childAccordion?.closeAll();this.updateToggleButtonLabel();this.toggleAllLabelUpdate();const t=this.accordion.getElementsByClassName(e.toggleAllElement)[0];t.focus()},"closeAll"));i(this,"toggleAllLabelUpdate",s(()=>{const t=this.accordion.getElementsByClassName(e.toggleAllElement)[0];if(t&&this.areAllItemsOpen()){t.classList.remove(e.toggleAllClosed);t.classList.add(e.toggleAllOpen)}else{t.classList.remove(e.toggleAllOpen);t.classList.add(e.toggleAllClosed)}},"toggleAllLabelUpdate"));i(this,"areAllItemsOpen",s(()=>this.accordionItems?.every(e=>e.isOpen)&&this.areChildItemsOpen(),"areAllItemsOpen"));i(this,"areChildItemsOpen",s(()=>this.childAccordion?.areAllItemsOpen()??this.accordionItems?.every(e=>e.isOpen),"areChildItemsOpen"));i(this,"isHardcoded",s(()=>this.type==="hardcoded","isHardcoded"));this.type=r;this.isSingleItemAccordion=false;this.currentLanguage=d.getCurrentLanguage();this.accordion=t;this.localState=a;this.accordionItems=[];this.childAccordion=null;this.urlHash=o;this.initializeAccordion(o);this.addEventListeners();this.showToggleButton();this.updateToggleButtonLabel()}};s(g,"HelfiAccordion");i(g,"accordionWrapper","component--accordion");i(g,"toggleAllElement","js-accordion__button--toggle-all");i(g,"toggleAllOpen","accordion__button--is-open");i(g,"toggleAllClosed","accordion__button--is-closed");i(g,"headerlessTypes",["headerless","hardcoded"]);i(g,"isHeaderless",s(e=>g.headerlessTypes.includes(e),"isHeaderless"));var u=g})();