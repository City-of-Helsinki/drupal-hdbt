(()=>{var e=Object.create;var t=Object.defineProperty;var n=Object.getOwnPropertyDescriptor;var r=Object.getOwnPropertyNames;var s=Object.getPrototypeOf;var i=Object.prototype.hasOwnProperty;var a=(e,n)=>t(e,"name",{value:n,configurable:true});var o=(e,t)=>function n(){return t||(0,e[r(e)[0]])((t={exports:{}}).exports,t),t.exports};var l=(e,s,a,o)=>{if(s&&typeof s==="object"||typeof s==="function"){for(let l of r(s))if(!i.call(e,l)&&l!==a)t(e,l,{get:()=>s[l],enumerable:!(o=n(s,l))||o.enumerable})}return e};var c=(n,r,i)=>(i=n!=null?e(s(n)):{},l(r||!n||!n.__esModule?t(i,"default",{value:n,enumerable:true}):i,n));var u=o({"src/js/nav-toggle/toggle-widgets.js"(e,t){var n=[".si-toggle-container",".aca--button--desktop, .aca--button--mobile, .aca--widget--mobile, .aca--widget--desktop, #aca--widget-button-close","#telia-ace-leijuke",".humany-trigger, .humany-widget","#ed11y-panel","#sliding-popup"];var r=a(()=>{document.querySelectorAll(n.join(",")).forEach(e=>{e.dataset.cssmenuHide=true})},"close");var s=a(()=>{document.querySelectorAll(n.join(",")).forEach(e=>{delete e.dataset.cssmenuHide})},"open");var i=a(e=>{(e===true?r:s)()},"setHide");t.exports={setHide:i,close:r,open:s,HIDE_SELECTORS:n}}});var d=o({"src/js/nav-toggle/nav-toggle-dropdown.js"(e,t){var n=class e{constructor(){this.HASH_ID=null;this.buttonSelector=null;this.buttonInstances=[];this.dropdownSelector=null;this.dropdownInstance=null;this.running=false;this.targetNode=null;this.onOpen=null;this.onClose=null;this.lastClickedButton=null;const e=new URLSearchParams(window.location.search);this.debug=e.has("debug")&&e.get("debug")===""}isOpen(){return window.location.hash===this.HASH_ID||this.targetNode.dataset.target==="true"}simpleClose(){if(this.running){this.buttonInstances.forEach(e=>e.setAttribute("aria-expanded","false"));this.dropdownInstance?.classList.add("nav-toggle-dropdown--closed");this.dropdownInstance?.removeAttribute("style");this.targetNode.dataset.target="false";if(this.onClose){this.onClose()}}}close(){this.simpleClose();if(this.running){let e=this.lastClickedButton;if(this.dropdownInstance?.contains(e)){e=this.buttonInstances.find(e=>!this.dropdownInstance.contains(e))||null}if(e){e.focus()}if(this.onClose){this.onClose()}}}open(){if(this.running){this.buttonInstances.forEach(e=>e.setAttribute("aria-expanded","true"));this.dropdownInstance?.classList.remove("nav-toggle-dropdown--closed");this.targetNode.dataset.target="true";if(this.onOpen){this.onOpen()}}}toggle(e){if(this.isOpen()){this.close()}else{this.lastClickedButton=e;this.open()}}addListeners(){document.addEventListener("keydown",e=>{if(e.key==="Escape"&&this.isOpen()){this.close()}});this.buttonInstances.forEach(e=>{e.addEventListener("click",()=>{this.toggle(e)})})}init({name:e,buttonSelector:t,dropdownSelector:n=null,targetSelector:r,onOpen:s,onClose:i}){this.name=e;this.buttonSelector=t;this.buttonInstances=Array.from(document.querySelectorAll(this.buttonSelector));if(this.buttonInstances.length===0){this.running=false;if(this.debug){console.warn(`${e} buttons missing. Looking for ${this.buttonSelector}`)}return}if(this.running){if(this.debug){console.warn(`${e} already initiated. Is it included more than once?`)}return}this.dropdownSelector=n;this.dropdownInstance=this.dropdownSelector?document.querySelector(this.dropdownSelector):null;this.dropdownInstance?.classList.add("nav-toggle-dropdown--closed");this.HASH_ID=r;this.onOpen=s;this.onClose=i;this.targetNode=document.querySelector(this.HASH_ID);if(!this.targetNode){throw new Error(`${e} target node missing. Looking for ${this.HASH_ID}`)}this.targetNode.dataset.js=true;this.addListeners();this.running=true}};a(n,"NavToggleDropdown");var r=n;t.exports=()=>new r}});var h=o({"node_modules/classnames/index.js"(e,t){(function(){var e={}.hasOwnProperty;function n(){var t=[];for(var r=0;r<arguments.length;r++){var s=arguments[r];if(!s)continue;var i=typeof s;if(i==="string"||i==="number"){t.push(s)}else if(Array.isArray(s)){if(s.length){var a=n.apply(null,s);if(a){t.push(a)}}}else if(i==="object"){if(s.toString===Object.prototype.toString){for(var o in s){if(e.call(s,o)&&s[o]){t.push(o)}}}else{t.push(s.toString())}}}return t.join(" ")}a(n,"classNames");if(typeof t!=="undefined"&&t.exports){n.default=n;t.exports=n}else if(typeof define==="function"&&typeof define.amd==="object"&&define.amd){define("classnames",[],function(){return n})}else{window.classNames=n}})()}});var p=c(u());var f=c(d());var g=Object.prototype.toString;var m=Array.isArray||a(function e(t){return g.call(t)==="[object Array]"},"isArrayPolyfill");function v(e){return typeof e==="function"}a(v,"isFunction");function w(e){return m(e)?"array":typeof e}a(w,"typeStr");function b(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}a(b,"escapeRegExp");function _(e,t){return e!=null&&typeof e==="object"&&t in e}a(_,"hasProperty");function y(e,t){return e!=null&&typeof e!=="object"&&e.hasOwnProperty&&e.hasOwnProperty(t)}a(y,"primitiveHasOwnProperty");var x=RegExp.prototype.test;function k(e,t){return x.call(e,t)}a(k,"testRegExp");var I=/\S/;function L(e){return!k(I,e)}a(L,"isWhitespace");var S={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function E(e){return String(e).replace(/[&<>"'`=\/]/g,a(function e(t){return S[t]},"fromEntityMap"))}a(E,"escapeHtml");var O=/\s*/;var C=/\s+/;var P=/\s*=/;var A=/\s*\}/;var j=/#|\^|\/|>|\{|&|=|!/;function T(e,t){if(!e)return[];var n=false;var r=[];var s=[];var i=[];var o=false;var l=false;var c="";var u=0;function d(){if(o&&!l){while(i.length)delete s[i.pop()]}else{i=[]}o=false;l=false}a(d,"stripSpace");var h,p,f;function g(e){if(typeof e==="string")e=e.split(C,2);if(!m(e)||e.length!==2)throw new Error("Invalid tags: "+e);h=new RegExp(b(e[0])+"\\s*");p=new RegExp("\\s*"+b(e[1]));f=new RegExp("\\s*"+b("}"+e[1]))}a(g,"compileTags");g(t||B.tags);var v=new H(e);var w,_,y,x,k,I;while(!v.eos()){w=v.pos;y=v.scanUntil(h);if(y){for(var S=0,E=y.length;S<E;++S){x=y.charAt(S);if(L(x)){i.push(s.length);c+=x}else{l=true;n=true;c+=" "}s.push(["text",x,w,w+1]);w+=1;if(x==="\n"){d();c="";u=0;n=false}}}if(!v.scan(h))break;o=true;_=v.scan(j)||"name";v.scan(O);if(_==="="){y=v.scanUntil(P);v.scan(P);v.scanUntil(p)}else if(_==="{"){y=v.scanUntil(f);v.scan(A);v.scanUntil(p);_="&"}else{y=v.scanUntil(p)}if(!v.scan(p))throw new Error("Unclosed tag at "+v.pos);if(_==">"){k=[_,y,w,v.pos,c,u,n]}else{k=[_,y,w,v.pos]}u++;s.push(k);if(_==="#"||_==="^"){r.push(k)}else if(_==="/"){I=r.pop();if(!I)throw new Error('Unopened section "'+y+'" at '+w);if(I[1]!==y)throw new Error('Unclosed section "'+I[1]+'" at '+w)}else if(_==="name"||_==="{"||_==="&"){l=true}else if(_==="="){g(y)}}d();I=r.pop();if(I)throw new Error('Unclosed section "'+I[1]+'" at '+v.pos);return D(R(s))}a(T,"parseTemplate");function R(e){var t=[];var n,r;for(var s=0,i=e.length;s<i;++s){n=e[s];if(n){if(n[0]==="text"&&r&&r[0]==="text"){r[1]+=n[1];r[3]=n[3]}else{t.push(n);r=n}}}return t}a(R,"squashTokens");function D(e){var t=[];var n=t;var r=[];var s,i;for(var a=0,o=e.length;a<o;++a){s=e[a];switch(s[0]){case"#":case"^":n.push(s);r.push(s);n=s[4]=[];break;case"/":i=r.pop();i[5]=s[2];n=r.length>0?r[r.length-1][4]:t;break;default:n.push(s)}}return t}a(D,"nestTokens");function H(e){this.string=e;this.tail=e;this.pos=0}a(H,"Scanner");H.prototype.eos=a(function e(){return this.tail===""},"eos");H.prototype.scan=a(function e(t){var n=this.tail.match(t);if(!n||n.index!==0)return"";var r=n[0];this.tail=this.tail.substring(r.length);this.pos+=r.length;return r},"scan");H.prototype.scanUntil=a(function e(t){var n=this.tail.search(t),r;switch(n){case-1:r=this.tail;this.tail="";break;case 0:r="";break;default:r=this.tail.substring(0,n);this.tail=this.tail.substring(n)}this.pos+=r.length;return r},"scanUntil");function N(e,t){this.view=e;this.cache={".":this.view};this.parent=t}a(N,"Context");N.prototype.push=a(function e(t){return new N(t,this)},"push");N.prototype.lookup=a(function e(t){var n=this.cache;var r;if(n.hasOwnProperty(t)){r=n[t]}else{var s=this,i,a,o,l=false;while(s){if(t.indexOf(".")>0){i=s.view;a=t.split(".");o=0;while(i!=null&&o<a.length){if(o===a.length-1)l=_(i,a[o])||y(i,a[o]);i=i[a[o++]]}}else{i=s.view[t];l=_(s.view,t)}if(l){r=i;break}s=s.parent}n[t]=r}if(v(r))r=r.call(this.view);return r},"lookup");function U(){this.templateCache={_cache:{},set:a(function e(t,n){this._cache[t]=n},"set"),get:a(function e(t){return this._cache[t]},"get"),clear:a(function e(){this._cache={}},"clear")}}a(U,"Writer");U.prototype.clearCache=a(function e(){if(typeof this.templateCache!=="undefined"){this.templateCache.clear()}},"clearCache");U.prototype.parse=a(function e(t,n){var r=this.templateCache;var s=t+":"+(n||B.tags).join(":");var i=typeof r!=="undefined";var a=i?r.get(s):void 0;if(a==void 0){a=T(t,n);i&&r.set(s,a)}return a},"parse");U.prototype.render=a(function e(t,n,r,s){var i=this.getConfigTags(s);var a=this.parse(t,i);var o=n instanceof N?n:new N(n,void 0);return this.renderTokens(a,o,r,t,s)},"render");U.prototype.renderTokens=a(function e(t,n,r,s,i){var a="";var o,l,c;for(var u=0,d=t.length;u<d;++u){c=void 0;o=t[u];l=o[0];if(l==="#")c=this.renderSection(o,n,r,s,i);else if(l==="^")c=this.renderInverted(o,n,r,s,i);else if(l===">")c=this.renderPartial(o,n,r,i);else if(l==="&")c=this.unescapedValue(o,n);else if(l==="name")c=this.escapedValue(o,n,i);else if(l==="text")c=this.rawValue(o);if(c!==void 0)a+=c}return a},"renderTokens");U.prototype.renderSection=a(function e(t,n,r,s,i){var o=this;var l="";var c=n.lookup(t[1]);function u(e){return o.render(e,n,r,i)}a(u,"subRender");if(!c)return;if(m(c)){for(var d=0,h=c.length;d<h;++d){l+=this.renderTokens(t[4],n.push(c[d]),r,s,i)}}else if(typeof c==="object"||typeof c==="string"||typeof c==="number"){l+=this.renderTokens(t[4],n.push(c),r,s,i)}else if(v(c)){if(typeof s!=="string")throw new Error("Cannot use higher-order sections without the original template");c=c.call(n.view,s.slice(t[3],t[5]),u);if(c!=null)l+=c}else{l+=this.renderTokens(t[4],n,r,s,i)}return l},"renderSection");U.prototype.renderInverted=a(function e(t,n,r,s,i){var a=n.lookup(t[1]);if(!a||m(a)&&a.length===0)return this.renderTokens(t[4],n,r,s,i)},"renderInverted");U.prototype.indentPartial=a(function e(t,n,r){var s=n.replace(/[^ \t]/g,"");var i=t.split("\n");for(var a=0;a<i.length;a++){if(i[a].length&&(a>0||!r)){i[a]=s+i[a]}}return i.join("\n")},"indentPartial");U.prototype.renderPartial=a(function e(t,n,r,s){if(!r)return;var i=this.getConfigTags(s);var a=v(r)?r(t[1]):r[t[1]];if(a!=null){var o=t[6];var l=t[5];var c=t[4];var u=a;if(l==0&&c){u=this.indentPartial(a,c,o)}var d=this.parse(u,i);return this.renderTokens(d,n,r,u,s)}},"renderPartial");U.prototype.unescapedValue=a(function e(t,n){var r=n.lookup(t[1]);if(r!=null)return r},"unescapedValue");U.prototype.escapedValue=a(function e(t,n,r){var s=this.getConfigEscape(r)||B.escape;var i=n.lookup(t[1]);if(i!=null)return typeof i==="number"&&s===B.escape?String(i):s(i)},"escapedValue");U.prototype.rawValue=a(function e(t){return t[1]},"rawValue");U.prototype.getConfigTags=a(function e(t){if(m(t)){return t}else if(t&&typeof t==="object"){return t.tags}else{return void 0}},"getConfigTags");U.prototype.getConfigEscape=a(function e(t){if(t&&typeof t==="object"&&!m(t)){return t.escape}else{return void 0}},"getConfigEscape");var B={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){$.templateCache=e},get templateCache(){return $.templateCache}};var $=new U;B.clearCache=a(function e(){return $.clearCache()},"clearCache");B.parse=a(function e(t,n){return $.parse(t,n)},"parse");B.render=a(function e(t,n,r,s){if(typeof t!=="string"){throw new TypeError('Invalid template! Template should be a "string" but "'+w(t)+'" was given as the first argument for mustache#render(template, view, partials)')}return $.render(t,n,r,s)},"render");B.escape=E;B.Scanner=H;B.Context=N;B.Writer=U;var q=B;var M=c(h());var V=Drupal.t("Frontpage",{},{context:"Global navigation mobile menu top level"});var F=Drupal.t("Open submenu:",{},{context:"Mobile navigation menu prefix"});var W=Drupal.t("Open parent menu:",{},{context:"Mobile navigation menu prefix"});Array.prototype.findRecursive=a(function e(t,n){if(!n){throw new Error("findRecursive requires parameter `childrenPropertyName`")}let r=[];r=this;const s=r.find(t);const i=r.filter(e=>e[n]);if(s){return s}if(i.length){const e=[];i.forEach(t=>{e.push(...t[n])});return e.findRecursive(t,n)}return void 0},"findRecursivelyFromArray");function z(){return this.sub_tree?.length>0}a(z,"button");function J(){let e;try{e=new URL(this.url).pathname}catch(t){e=this.url}return!this.external&&this.url&&e===window.location.pathname}a(J,"isCurrentPath");function G(){return!!this.active}a(G,"isActive");function K(){return!!this.inPath}a(K,"isInPath");function Q(){return!!this.is_injected}a(Q,"isInjected");function X(){return{external:this.attributes["data-external"]||this.external||false,protocol:this.attributes["data-protocol"]||false}}a(X,"externalLinkAttributes");function Y(){return!!this.attributes?.lang}a(Y,"hasLang");function Z(){if(!this.external){return false}return Z.ICONS[this.attributes["data-protocol"]]||Z.ICONS.external}a(Z,"externalLinkIcon");Z.ICONS={mailto:{class:"link__type link__type--mailto",text:Drupal.t("Link opens default mail program",{},{context:"Explanation for screen-reader software that the icon visible next to this link means that the link opens default mail program."})},tel:{class:"link__type link__type--tel",text:Drupal.t("Link starts a phone call",{},{context:"Explanation for screen-reader software that the icon visible next to this link means that the link starts a phone call."})},external:{class:"link__type link__type--external",text:Drupal.t("Link leads to external service",{},{context:"Explanation for screen-reader software that the icon visible next to this link means that the link leads to an external service."})}};var ee={compileTemplates(){this.templates={panel:`\n  {{#panels}}\n    <section class="{{panel_class}}">\n      <div class="mmenu__panel-body">\n        {{#back}}\n          <button class="mmenu__back">\n            <span class="visually-hidden">{{openParentMenuTranslation}}</span>\n            <span class="mmenu__back-wrapper">{{back}}</span>\n          </button>\n        {{/back}}\n        <a href="{{url}}" class="mmenu__title-link{{#isInPath}} mmenu__title-link--in-path{{/isInPath}}"{{#isActive}} aria-current="page"{{/isActive}}\n\n        {{#externalLinkAttributes.external}}\n          data-external="true"\n        {{/externalLinkAttributes.external}}\n\n        {{#externalLinkAttributes.protocol}}\n          data-protocol="{{externalLinkAttributes.protocol}}"\n        {{/externalLinkAttributes.protocol}}\n\n        ><span class="mmenu__link__text"\n\n        {{#hasLang}}\n          lang="{{attributes.lang}}"\n        {{/hasLang}}\n\n        >{{name}}</span>{{#externalLinkIcon}} <span class="{{class}}"></span><span class="visually-hidden">({{ text }})</span>{{/externalLinkIcon}}</a>\n        {{>sub_tree}}\n      </div>\n      ${document.querySelector(".js-mmenu__footer")?.outerHTML}\n    </section>\n  {{/panels}}\n\n  {{^panels}}\n  <div class="mmenu__loading">\n    <div class="hds-loading-spinner">\n      <div></div>\n      <div></div>\n      <div></div>\n    </div>\n  </div>\n  {{/panels}}\n  `,list:`\n    <ul class="mmenu__items">\n      {{#sub_tree}}\n        <li class="mmenu__item">\n          <a href="{{url}}" class="mmenu__item-link{{#isInPath}} mmenu__item-link--in-path{{/isInPath}}{{#isInjected}} mmenu__item-link--injected{{/isInjected}}"{{#isActive}} aria-current="page"{{/isActive}}\n          {{#externalLinkAttributes.external}}\n            data-external="true"\n          {{/externalLinkAttributes.external}}\n          {{#externalLinkAttributes.protocol}}\n            data-protocol={{externalLinkAttributes.protocol}}\n          {{/externalLinkAttributes.protocol}}\n\n          ><span class="mmenu__link__text"\n\n          {{#hasLang}}\n            lang="{{attributes.lang}}"\n          {{/hasLang}}\n\n            >{{name}}</span>{{#externalLinkIcon}} <span class="{{class}}"></span><span class="visually-hidden">({{ text }})</span>{{/externalLinkIcon}}\n          </a>\n          {{#button}}\n            <button class="mmenu__forward " value={{id}}><span class="visually-hidden">{{openSubMenuTranslation}} {{name}}</span></button>\n          {{/button}}\n        </li>\n      {{/sub_tree}}\n    </ul>\n   `}},menu:null,templates:null,SCROLL_TRESHOLD:100,size:10,running:false,data:null,currentIndex:0,cacheKey:"hdbt-mobile-menu",enableCache:false,selectors:{container:"#mmenu",rootId:"mmenu__panels",forward:"mmenu__forward",back:"mmenu__back",dropdown:"js-menu-dropdown"},getAPIUrl(){const e=new URL(drupalSettings?.helfi_navigation?.links?.api);e.searchParams.set("_format","json");e.searchParams.set("max-depth",drupalSettings?.menu_depth);return e.toString()},getRoot(){return document.getElementById(this.selectors.rootId)},sortPanelsByPath(){const e=[];const t=this.data;const n=t.findRecursive(e=>J.call(e),"sub_tree");let r=n?.sub_tree?.length?n.id:n?.parentId;while(r){const n=t.findRecursive(({id:t,url:n,name:s,sub_tree:i,parentId:a,inPath:o,active:l})=>{if(t===r){e.push({sub_tree:i,name:s,url:n,parentId:a,inPath:o,active:l});r=a;return true}return false},"sub_tree");if(!n){r=void 0}}e.push({sub_tree:t,inPath:true});e.reverse();this.currentIndex=e.length-1;this.content=[...e]},content:[],getView(e){return this.content.map((t,n)=>({...t,name:t?.name||V,url:t.url||drupalSettings.helfi_navigation.links.canonical,button:z,isActive:G,isInPath:K,isInjected:Q,externalLinkAttributes:X,hasLang:Y,externalLinkIcon:Z,back:n>0?this.content.at(n-1)?.name??V:false,openSubMenuTranslation:F,openParentMenuTranslation:W,panel_class:(0,M.default)({mmenu__panel:true,"mmenu__panel--visible":true,"mmenu__panel--current":n===this.currentIndex,"mmenu__panel--visible-right":e==="start"&&n>this.currentIndex||e==="up"&&n>=this.currentIndex||e==="down"&&n>this.currentIndex+1,"mmenu__panel--visible-left":e==="up"&&n<this.currentIndex-1||e==="down"&&n<=this.currentIndex})}))},up(e){if(!e){throw new Error(`Id missing for next menu item  ${e}`)}const t=this.content.at(this.currentIndex).sub_tree.find(({id:t})=>t===e);if(!t){throw new Error(`ID mismatch in menu items${e}`)}this.currentIndex=this.currentIndex+1<this.size?this.currentIndex+1:this.currentIndex;this.content[this.currentIndex]=t;this.render("up")},down(){if(this.currentIndex===0){return}this.currentIndex=this.currentIndex-1>=0?this.currentIndex-1:this.currentIndex;this.render("down")},render(e){const t=this.getRoot();t.innerHTML=q.render(this.templates.panel,{panels:this.getView(e)},{sub_tree:this.templates.list});if(e==="load"){return}const n=[...t.querySelectorAll(".mmenu__panel")];const r=n.at(this.currentIndex);if(t.parentElement.scrollTop>this.SCROLL_TRESHOLD&&this.currentIndex>0){r.querySelector(".mmenu__back").scrollIntoView({block:"start",behaviour:"smooth"})}setTimeout(()=>{r.classList.remove("mmenu__panel--visible-right","mmenu__panel--visible-left");switch(e){case"up":n.at(this.currentIndex-1).classList.add("mmenu__panel--visible-left");break;case"down":n.at(this.currentIndex+1).classList.add("mmenu__panel--visible-right");break;default:}setTimeout(()=>{n.forEach(e=>{if(!e.classList.contains("mmenu__panel--current")){e.style.visibility="hidden"}})},200)},10)},async load(){const e=await fetch(this.getAPIUrl());const t=await e.json();const n=Object.getOwnPropertyNames(t);if(!n.length){throw new Error("No instances found in data",t)}const r=n.map(e=>{const n=t[e].menu_tree[0];n.parentId="";return n});const s=r.findRecursive(e=>J.call(e),"sub_tree");if(s){s.active=true;s.inPath=true}let i=s?.parentId;while(i){const e=r.findRecursive(e=>{if(e.id===i){i=e.parentId;e.inPath=true;return true}return false},"sub_tree");if(!e){i=void 0}}this.data=r},async start(){const e=document.querySelector(this.selectors.container);if(!this.getRoot()||!e){throw new Error("Panel root not found")}e.classList.add("mmenu--visible");this.render("load");try{await this.load()}catch(e){console.error("Unable to load menu API, using fallback menu instead",e);this.enableFallback();return}this.sortPanelsByPath();this.render("start");this.getRoot().addEventListener("click",e=>{const{target:{classList:t,value:n,parentElement:r}}=e;e.stopImmediatePropagation();if(t&&t.contains(this.selectors.forward)){this.up(n)}else if(t&&t.contains(this.selectors.back)||r?.classList&&r?.classList.contains(this.selectors.back)){this.down()}})},isOpen(){return window.location.hash==="#menu"||this.toggleButton.getAttribute("aria-expanded")==="true"},disableFallback(){this.menu.dataset.js=true},enableFallback(){this.menu.dataset.target="false";this.getRoot().innerHTML="";delete this.menu.dataset.js;window.location.hash="#menu"},close(){this.dropdownInstance.classList.add("nav-toggle-dropdown--closed");this.toggleButton.setAttribute("aria-expanded","false");this.menu.dataset.target="false";if(this.onClose){this.onClose()}},open(){this.dropdownInstance.classList.remove("nav-toggle-dropdown--closed");this.menu.dataset.target="true";this.toggleButton.setAttribute("aria-expanded","true");if(this.onOpen){this.onOpen()}},toggle(){if(this.isOpen()){this.close()}else{this.open()}this.toggleButton.focus()},init({onOpen:e,onClose:t}){if(this.running){console.warn("MobilePanel already initiated. Is it include more than once?");return}this.onOpen=e;this.onClose=t;this.toggleButton=document.querySelector(".js-menu-toggle-button");if(!this.toggleButton){throw new Error("No toggle button for JS menu.")}this.dropdownInstance=document.querySelector(`.${this.selectors.dropdown}`);if(!this.dropdownInstance){throw new Error("No dropdown element for JS menu.")}this.dropdownInstance.classList.add("nav-toggle-dropdown--closed");this.menu=document.querySelector("#menu");if(!this.menu){console.error("Panel not present in DOM. Cannot start JS mobile menu");return}this.disableFallback();document.addEventListener("keydown",e=>{if(e.key==="Escape"&&this.isOpen()){this.close();this.toggleButton.focus()}});const n=a(()=>{this.compileTemplates();this.toggleButton.removeEventListener("click",n);this.start()},"start");this.toggleButton.addEventListener("click",n);this.toggleButton.addEventListener("click",()=>this.toggle());if(this.isOpen()){window.location.hash="";n();this.open()}this.running=true}};var te=ee;(Drupal=>{Drupal.behaviors.navToggle={attach(e,t){if(window.navToggleInitialized&&e===document){return}const n={};const r=t.hdbt.global_menu?te:false;if(t.hdbt.profile_dropdown){n.ProfileDropdown="profile"}if(t.hdbt.search_dropdown){n.SearchDropdown="search"}if(t.hdbt.otherlangs_dropdown){n.OtherLangsDropdown="otherlangs"}if(!r){n.CssMenuDropdownDropdown="cssmenu"}if(t.hdbt.language_toast_dropdown){const e=t.hdbt.current_language;const r=["fi","sv","en"];r.forEach(t=>{if(t!==e){const e=`LanguageToast${t.charAt(0).toUpperCase()}${t.slice(1)}`;n[e]=`language-toast--${t}`}})}const s=a(e=>e.scrollWidth>e.clientWidth||e.scrollHeight>e.clientHeight,"isScrollable");const i=a(()=>window.matchMedia("(max-width: 992px)").matches,"isMobile");const o=n;const l=Object.keys(o);const c=a((e,t,n)=>{const r=a(()=>{setTimeout(()=>{const n=document.activeElement;if(!e.contains(n)){t()}},10)},"handler");const s=a(()=>{e.removeEventListener("focusout",r);if(!i()||n?.startsWith("LanguageToast")){e.addEventListener("focusout",r)}},"attachHandler");s();window.addEventListener("resize",s)},"closeOnFocusOut");l.forEach(e=>{const t=o[e];o[e]=(0,f.default)();o[e].init({buttonSelector:`.js-${t}-button`,dropdownSelector:`.js-${t}-dropdown`,name:`${t} dropdown`,onClose:p.open,onOpen:a(()=>{l.forEach(t=>{if(t!==e){o[t].simpleClose()}});if(r)r.close();(0,p.close)();if(e==="SearchDropdown"){window.setTimeout(()=>document.querySelector('.header-search-wrapper input[type="search"]')?.focus(),10)}const t=o[e];let n=t?.dropdownInstance;if(e.startsWith("LanguageToast")){n=t?.dropdownInstance?.parentElement}if(n){c(n,()=>t.simpleClose(),e)}},"onOpen"),targetSelector:`#${t}`})});if(r){r.init({onOpen:a(()=>{l.forEach(e=>{o[e].close()});const e=document.getElementById("nav-toggle-dropdown--menu");if(e){c(e,()=>r.close())}(0,p.close)()},"onOpen"),onClose:p.open})}const u=a(()=>l.some(e=>o[e].dataset&&o[e].isOpen())||r&&r.isOpen(),"isAnyMenuOpen");const d=a(({target:e})=>{if(e.closest(".desktop-menu, .header-top")||!e.closest(".header")){l.forEach(e=>{o[e].simpleClose()});if(r)r.close();(0,p.open)()}},"closeFromOutside");const h=a(e=>{if(e.touches?.length>1)return true;const t=e.target.closest(".mmenu__panel--current, .nav-toggle-dropdown__content");const n=i()&&u()&&(!e.target.closest(".nav-toggle-dropdown")||t&&!s(t));if(n){e.preventDefault();e.stopPropagation();return false}},"blockBrandingScroll");e.addEventListener("click",d);const g=document.querySelector("body");g.addEventListener("wheel",h,{passive:false});g.addEventListener("scroll",h,{passive:false});g.addEventListener("touchmove",h,{passive:false});window.navToggleInitialized=true}}})(Drupal)})();