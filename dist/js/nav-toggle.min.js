(()=>{var re=Object.create;var j=Object.defineProperty;var ie=Object.getOwnPropertyDescriptor;var ae=Object.getOwnPropertyNames;var oe=Object.getPrototypeOf,le=Object.prototype.hasOwnProperty;var i=(n,e)=>j(n,"name",{value:e,configurable:!0});var D=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var ce=(n,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of ae(e))!le.call(n,r)&&r!==t&&j(n,r,{get:()=>e[r],enumerable:!(s=ie(e,r))||s.enumerable});return n};var M=(n,e,t)=>(t=n!=null?re(oe(n)):{},ce(e||!n||!n.__esModule?j(t,"default",{value:n,enumerable:!0}):t,n));var z=D((He,W)=>{var H=[".si-toggle-container",".aca--button--desktop, .aca--button--mobile, .aca--widget--mobile, .aca--widget--desktop, #aca--widget-button-close","#telia-ace-leijuke",".humany-trigger, .humany-widget","#ed11y-panel","#sliding-popup"],N=i(()=>{document.querySelectorAll(H.join(",")).forEach(n=>{n.dataset.cssmenuHide=!0})},"close"),F=i(()=>{document.querySelectorAll(H.join(",")).forEach(n=>{delete n.dataset.cssmenuHide})},"open"),ue=i(n=>{(n===!0?N:F)()},"setHide");W.exports={setHide:ue,close:N,open:F,HIDE_SELECTORS:H}});var J=D((Be,V)=>{var B=class B{constructor(){this.HASH_ID=null,this.buttonSelector=null,this.buttonInstances=[],this.dropdownSelector=null,this.dropdownInstance=null,this.running=!1,this.targetNode=null,this.onOpen=null,this.onClose=null,this.lastClickedButton=null;let e=new URLSearchParams(window.location.search);this.debug=e.has("debug")&&e.get("debug")===""}isOpen(){return window.location.hash===this.HASH_ID||this.targetNode.dataset.target==="true"}simpleClose(){this.running&&(this.buttonInstances.forEach(e=>e.setAttribute("aria-expanded","false")),this.dropdownInstance?.classList.add("nav-toggle-dropdown--closed"),this.dropdownInstance?.removeAttribute("style"),this.targetNode.dataset.target="false",this.onClose&&this.onClose())}close(){if(this.simpleClose(),this.running){let e=this.lastClickedButton;this.dropdownInstance?.contains(e)&&(e=this.buttonInstances.find(t=>!this.dropdownInstance.contains(t))||null),e&&e.focus(),this.onClose&&this.onClose()}}open(){this.running&&(this.buttonInstances.forEach(e=>e.setAttribute("aria-expanded","true")),this.dropdownInstance?.classList.remove("nav-toggle-dropdown--closed"),this.targetNode.dataset.target="true",this.onOpen&&this.onOpen())}toggle(e){this.isOpen()?this.close():(this.lastClickedButton=e,this.open())}addListeners(){document.addEventListener("keydown",e=>{e.key==="Escape"&&this.isOpen()&&this.close()}),this.buttonInstances.forEach(e=>{e.addEventListener("click",()=>{this.toggle(e)})})}init({name:e,buttonSelector:t,dropdownSelector:s=null,targetSelector:r,onOpen:a,onClose:o}){if(this.name=e,this.buttonSelector=t,this.buttonInstances=Array.from(document.querySelectorAll(this.buttonSelector)),this.buttonInstances.length===0){this.running=!1,this.debug&&console.warn(`${e} buttons missing. Looking for ${this.buttonSelector}`);return}if(this.running){this.debug&&console.warn(`${e} already initiated. Is it included more than once?`);return}if(this.dropdownSelector=s,this.dropdownInstance=this.dropdownSelector?document.querySelector(this.dropdownSelector):null,this.dropdownInstance?.classList.add("nav-toggle-dropdown--closed"),this.HASH_ID=r,this.onOpen=a,this.onClose=o,this.targetNode=document.querySelector(this.HASH_ID),!this.targetNode)throw new Error(`${e} target node missing. Looking for ${this.HASH_ID}`);this.targetNode.dataset.js=!0,this.addListeners(),this.running=!0}};i(B,"NavToggleDropdown");var U=B;V.exports=()=>new U});var X=D((Fe,P)=>{(function(){var n={}.hasOwnProperty;function e(){for(var t=[],s=0;s<arguments.length;s++){var r=arguments[s];if(r){var a=typeof r;if(a==="string"||a==="number")t.push(r);else if(Array.isArray(r)){if(r.length){var o=e.apply(null,r);o&&t.push(o)}}else if(a==="object")if(r.toString===Object.prototype.toString)for(var l in r)n.call(r,l)&&r[l]&&t.push(l);else t.push(r.toString())}}return t.join(" ")}i(e,"classNames"),typeof P<"u"&&P.exports?(e.default=e,P.exports=e):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return e}):window.classNames=e})()});var I=M(z()),ne=M(J());var he=Object.prototype.toString,L=Array.isArray||i(function(e){return he.call(e)==="[object Array]"},"isArrayPolyfill");function $(n){return typeof n=="function"}i($,"isFunction");function de(n){return L(n)?"array":typeof n}i(de,"typeStr");function q(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}i(q,"escapeRegExp");function K(n,e){return n!=null&&typeof n=="object"&&e in n}i(K,"hasProperty");function pe(n,e){return n!=null&&typeof n!="object"&&n.hasOwnProperty&&n.hasOwnProperty(e)}i(pe,"primitiveHasOwnProperty");var fe=RegExp.prototype.test;function ge(n,e){return fe.call(n,e)}i(ge,"testRegExp");var me=/\S/;function ve(n){return!ge(me,n)}i(ve,"isWhitespace");var be={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function we(n){return String(n).replace(/[&<>"'`=\/]/g,i(function(t){return be[t]},"fromEntityMap"))}i(we,"escapeHtml");var _e=/\s*/,ye=/\s+/,G=/\s*=/,xe=/\s*\}/,ke=/#|\^|\/|>|\{|&|=|!/;function Ie(n,e){if(!n)return[];var t=!1,s=[],r=[],a=[],o=!1,l=!1,c="",d=0;function p(){if(o&&!l)for(;a.length;)delete r[a.pop()];else a=[];o=!1,l=!1}i(p,"stripSpace");var g,y,u;function b(x){if(typeof x=="string"&&(x=x.split(ye,2)),!L(x)||x.length!==2)throw new Error("Invalid tags: "+x);g=new RegExp(q(x[0])+"\\s*"),y=new RegExp("\\s*"+q(x[1])),u=new RegExp("\\s*"+q("}"+x[1]))}i(b,"compileTags"),b(e||_.tags);for(var h=new A(n),m,f,w,E,O,k;!h.eos();){if(m=h.pos,w=h.scanUntil(g),w)for(var T=0,se=w.length;T<se;++T)E=w.charAt(T),ve(E)?(a.push(r.length),c+=E):(l=!0,t=!0,c+=" "),r.push(["text",E,m,m+1]),m+=1,E===`
`&&(p(),c="",d=0,t=!1);if(!h.scan(g))break;if(o=!0,f=h.scan(ke)||"name",h.scan(_e),f==="="?(w=h.scanUntil(G),h.scan(G),h.scanUntil(y)):f==="{"?(w=h.scanUntil(u),h.scan(xe),h.scanUntil(y),f="&"):w=h.scanUntil(y),!h.scan(y))throw new Error("Unclosed tag at "+h.pos);if(f==">"?O=[f,w,m,h.pos,c,d,t]:O=[f,w,m,h.pos],d++,r.push(O),f==="#"||f==="^")s.push(O);else if(f==="/"){if(k=s.pop(),!k)throw new Error('Unopened section "'+w+'" at '+m);if(k[1]!==w)throw new Error('Unclosed section "'+k[1]+'" at '+m)}else f==="name"||f==="{"||f==="&"?l=!0:f==="="&&b(w)}if(p(),k=s.pop(),k)throw new Error('Unclosed section "'+k[1]+'" at '+h.pos);return Le(Se(r))}i(Ie,"parseTemplate");function Se(n){for(var e=[],t,s,r=0,a=n.length;r<a;++r)t=n[r],t&&(t[0]==="text"&&s&&s[0]==="text"?(s[1]+=t[1],s[3]=t[3]):(e.push(t),s=t));return e}i(Se,"squashTokens");function Le(n){for(var e=[],t=e,s=[],r,a,o=0,l=n.length;o<l;++o)switch(r=n[o],r[0]){case"#":case"^":t.push(r),s.push(r),t=r[4]=[];break;case"/":a=s.pop(),a[5]=r[2],t=s.length>0?s[s.length-1][4]:e;break;default:t.push(r)}return e}i(Le,"nestTokens");function A(n){this.string=n,this.tail=n,this.pos=0}i(A,"Scanner");A.prototype.eos=i(function(){return this.tail===""},"eos");A.prototype.scan=i(function(e){var t=this.tail.match(e);if(!t||t.index!==0)return"";var s=t[0];return this.tail=this.tail.substring(s.length),this.pos+=s.length,s},"scan");A.prototype.scanUntil=i(function(e){var t=this.tail.search(e),s;switch(t){case-1:s=this.tail,this.tail="";break;case 0:s="";break;default:s=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=s.length,s},"scanUntil");function S(n,e){this.view=n,this.cache={".":this.view},this.parent=e}i(S,"Context");S.prototype.push=i(function(e){return new S(e,this)},"push");S.prototype.lookup=i(function(e){var t=this.cache,s;if(t.hasOwnProperty(e))s=t[e];else{for(var r=this,a,o,l,c=!1;r;){if(e.indexOf(".")>0)for(a=r.view,o=e.split("."),l=0;a!=null&&l<o.length;)l===o.length-1&&(c=K(a,o[l])||pe(a,o[l])),a=a[o[l++]];else a=r.view[e],c=K(r.view,e);if(c){s=a;break}r=r.parent}t[e]=s}return $(s)&&(s=s.call(this.view)),s},"lookup");function v(){this.templateCache={_cache:{},set:i(function(e,t){this._cache[e]=t},"set"),get:i(function(e){return this._cache[e]},"get"),clear:i(function(){this._cache={}},"clear")}}i(v,"Writer");v.prototype.clearCache=i(function(){typeof this.templateCache<"u"&&this.templateCache.clear()},"clearCache");v.prototype.parse=i(function(e,t){var s=this.templateCache,r=e+":"+(t||_.tags).join(":"),a=typeof s<"u",o=a?s.get(r):void 0;return o==null&&(o=Ie(e,t),a&&s.set(r,o)),o},"parse");v.prototype.render=i(function(e,t,s,r){var a=this.getConfigTags(r),o=this.parse(e,a),l=t instanceof S?t:new S(t,void 0);return this.renderTokens(o,l,s,e,r)},"render");v.prototype.renderTokens=i(function(e,t,s,r,a){for(var o="",l,c,d,p=0,g=e.length;p<g;++p)d=void 0,l=e[p],c=l[0],c==="#"?d=this.renderSection(l,t,s,r,a):c==="^"?d=this.renderInverted(l,t,s,r,a):c===">"?d=this.renderPartial(l,t,s,a):c==="&"?d=this.unescapedValue(l,t):c==="name"?d=this.escapedValue(l,t,a):c==="text"&&(d=this.rawValue(l)),d!==void 0&&(o+=d);return o},"renderTokens");v.prototype.renderSection=i(function(e,t,s,r,a){var o=this,l="",c=t.lookup(e[1]);function d(y){return o.render(y,t,s,a)}if(i(d,"subRender"),!!c){if(L(c))for(var p=0,g=c.length;p<g;++p)l+=this.renderTokens(e[4],t.push(c[p]),s,r,a);else if(typeof c=="object"||typeof c=="string"||typeof c=="number")l+=this.renderTokens(e[4],t.push(c),s,r,a);else if($(c)){if(typeof r!="string")throw new Error("Cannot use higher-order sections without the original template");c=c.call(t.view,r.slice(e[3],e[5]),d),c!=null&&(l+=c)}else l+=this.renderTokens(e[4],t,s,r,a);return l}},"renderSection");v.prototype.renderInverted=i(function(e,t,s,r,a){var o=t.lookup(e[1]);if(!o||L(o)&&o.length===0)return this.renderTokens(e[4],t,s,r,a)},"renderInverted");v.prototype.indentPartial=i(function(e,t,s){for(var r=t.replace(/[^ \t]/g,""),a=e.split(`
`),o=0;o<a.length;o++)a[o].length&&(o>0||!s)&&(a[o]=r+a[o]);return a.join(`
`)},"indentPartial");v.prototype.renderPartial=i(function(e,t,s,r){if(s){var a=this.getConfigTags(r),o=$(s)?s(e[1]):s[e[1]];if(o!=null){var l=e[6],c=e[5],d=e[4],p=o;c==0&&d&&(p=this.indentPartial(o,d,l));var g=this.parse(p,a);return this.renderTokens(g,t,s,p,r)}}},"renderPartial");v.prototype.unescapedValue=i(function(e,t){var s=t.lookup(e[1]);if(s!=null)return s},"unescapedValue");v.prototype.escapedValue=i(function(e,t,s){var r=this.getConfigEscape(s)||_.escape,a=t.lookup(e[1]);if(a!=null)return typeof a=="number"&&r===_.escape?String(a):r(a)},"escapedValue");v.prototype.rawValue=i(function(e){return e[1]},"rawValue");v.prototype.getConfigTags=i(function(e){return L(e)?e:e&&typeof e=="object"?e.tags:void 0},"getConfigTags");v.prototype.getConfigEscape=i(function(e){if(e&&typeof e=="object"&&!L(e))return e.escape},"getConfigEscape");var _={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(n){C.templateCache=n},get templateCache(){return C.templateCache}},C=new v;_.clearCache=i(function(){return C.clearCache()},"clearCache");_.parse=i(function(e,t){return C.parse(e,t)},"parse");_.render=i(function(e,t,s,r){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+de(e)+'" was given as the first argument for mustache#render(template, view, partials)');return C.render(e,t,s,r)},"render");_.escape=we;_.Scanner=A;_.Context=S;_.Writer=v;var Q=_;var ee=M(X());var Y=Drupal.t("Frontpage",{},{context:"Global navigation mobile menu top level"}),Ee=Drupal.t("Open submenu:",{},{context:"Mobile navigation menu prefix"}),Ce=Drupal.t("Open parent menu:",{},{context:"Mobile navigation menu prefix"});Array.prototype.findRecursive=i(function(e,t){if(!t)throw new Error("findRecursive requires parameter `childrenPropertyName`");let s=[];s=this;let r=s.find(e),a=s.filter(o=>o[t]);if(r)return r;if(a.length){let o=[];return a.forEach(l=>{o.push(...l[t])}),o.findRecursive(e,t)}},"findRecursivelyFromArray");function Ae(){return this.sub_tree?.length>0}i(Ae,"button");function Z(){let n;try{n=new URL(this.url).pathname}catch{n=this.url}return!this.external&&this.url&&n===window.location.pathname}i(Z,"isCurrentPath");function Oe(){return!!this.active}i(Oe,"isActive");function Pe(){return!!this.inPath}i(Pe,"isInPath");function Re(){return!!this.is_injected}i(Re,"isInjected");function Te(){return{external:this.attributes["data-external"]||this.external||!1,protocol:this.attributes["data-protocol"]||!1}}i(Te,"externalLinkAttributes");function je(){return!!this.attributes?.lang}i(je,"hasLang");function R(){return this.external?R.ICONS[this.attributes["data-protocol"]]||R.ICONS.external:!1}i(R,"externalLinkIcon");R.ICONS={mailto:{class:"link__type link__type--mailto",text:Drupal.t("Link opens default mail program",{},{context:"Explanation for screen-reader software that the icon visible next to this link means that the link opens default mail program."})},tel:{class:"link__type link__type--tel",text:Drupal.t("Link starts a phone call",{},{context:"Explanation for screen-reader software that the icon visible next to this link means that the link starts a phone call."})},external:{class:"link__type link__type--external",text:Drupal.t("Link leads to external service",{},{context:"Explanation for screen-reader software that the icon visible next to this link means that the link leads to an external service."})}};var De={compileTemplates(){this.templates={panel:`
  {{#panels}}
    <section class="{{panel_class}}">
      <div class="mmenu__panel-body">
        {{#back}}
          <button class="mmenu__back">
            <span class="visually-hidden">{{openParentMenuTranslation}}</span>
            <span class="mmenu__back-wrapper">{{back}}</span>
          </button>
        {{/back}}
        <a href="{{url}}" class="mmenu__title-link{{#isInPath}} mmenu__title-link--in-path{{/isInPath}}"{{#isActive}} aria-current="page"{{/isActive}}

        {{#externalLinkAttributes.external}}
          data-external="true"
        {{/externalLinkAttributes.external}}

        {{#externalLinkAttributes.protocol}}
          data-protocol="{{externalLinkAttributes.protocol}}"
        {{/externalLinkAttributes.protocol}}

        ><span class="mmenu__link__text"

        {{#hasLang}}
          lang="{{attributes.lang}}"
        {{/hasLang}}

        >{{name}}</span>{{#externalLinkIcon}} <span class="{{class}}"></span><span class="visually-hidden">({{ text }})</span>{{/externalLinkIcon}}</a>
        {{>sub_tree}}
      </div>
      ${document.querySelector(".js-mmenu__footer")?.outerHTML}
    </section>
  {{/panels}}

  {{^panels}}
  <div class="mmenu__loading">
    <div class="hds-loading-spinner">
      <div></div>
      <div></div>
      <div></div>
    </div>
  </div>
  {{/panels}}
  `,list:`
    <ul class="mmenu__items">
      {{#sub_tree}}
        <li class="mmenu__item">
          <a href="{{url}}" class="mmenu__item-link{{#isInPath}} mmenu__item-link--in-path{{/isInPath}}{{#isInjected}} mmenu__item-link--injected{{/isInjected}}"{{#isActive}} aria-current="page"{{/isActive}}
          {{#externalLinkAttributes.external}}
            data-external="true"
          {{/externalLinkAttributes.external}}
          {{#externalLinkAttributes.protocol}}
            data-protocol={{externalLinkAttributes.protocol}}
          {{/externalLinkAttributes.protocol}}

          ><span class="mmenu__link__text"

          {{#hasLang}}
            lang="{{attributes.lang}}"
          {{/hasLang}}

            >{{name}}</span>{{#externalLinkIcon}} <span class="{{class}}"></span><span class="visually-hidden">({{ text }})</span>{{/externalLinkIcon}}
          </a>
          {{#button}}
            <button class="mmenu__forward " value={{id}}><span class="visually-hidden">{{openSubMenuTranslation}} {{name}}</span></button>
          {{/button}}
        </li>
      {{/sub_tree}}
    </ul>
   `}},menu:null,templates:null,SCROLL_TRESHOLD:100,size:10,running:!1,data:null,currentIndex:0,cacheKey:"hdbt-mobile-menu",enableCache:!1,selectors:{container:"#mmenu",rootId:"mmenu__panels",forward:"mmenu__forward",back:"mmenu__back"},getAPIUrl(){let n=new URL(drupalSettings?.helfi_navigation?.links?.api);return n.searchParams.set("_format","json"),n.searchParams.set("max-depth",drupalSettings?.menu_depth),n.toString()},getRoot(){return document.getElementById(this.selectors.rootId)},sortPanelsByPath(){let n=[],e=this.data,t=e.findRecursive(r=>Z.call(r),"sub_tree"),s=t?.sub_tree?.length?t.id:t?.parentId;for(;s;)e.findRecursive(({id:a,url:o,name:l,sub_tree:c,parentId:d,inPath:p,active:g})=>a===s?(n.push({sub_tree:c,name:l,url:o,parentId:d,inPath:p,active:g}),s=d,!0):!1,"sub_tree")||(s=void 0);n.push({sub_tree:e,inPath:!0}),n.reverse(),this.currentIndex=n.length-1,this.content=[...n]},content:[],getView(n){return this.content.map((e,t)=>({...e,name:e?.name||Y,url:e.url||drupalSettings.helfi_navigation.links.canonical,button:Ae,isActive:Oe,isInPath:Pe,isInjected:Re,externalLinkAttributes:Te,hasLang:je,externalLinkIcon:R,back:t>0?this.content.at(t-1)?.name??Y:!1,openSubMenuTranslation:Ee,openParentMenuTranslation:Ce,panel_class:(0,ee.default)({mmenu__panel:!0,"mmenu__panel--visible":!0,"mmenu__panel--current":t===this.currentIndex,"mmenu__panel--visible-right":n==="start"&&t>this.currentIndex||n==="up"&&t>=this.currentIndex||n==="down"&&t>this.currentIndex+1,"mmenu__panel--visible-left":n==="up"&&t<this.currentIndex-1||n==="down"&&t<=this.currentIndex})}))},up(n){if(!n)throw new Error(`Id missing for next menu item  ${n}`);let e=this.content.at(this.currentIndex).sub_tree.find(({id:t})=>t===n);if(!e)throw new Error(`ID mismatch in menu items${n}`);this.currentIndex=this.currentIndex+1<this.size?this.currentIndex+1:this.currentIndex,this.content[this.currentIndex]=e,this.render("up")},down(){this.currentIndex!==0&&(this.currentIndex=this.currentIndex-1>=0?this.currentIndex-1:this.currentIndex,this.render("down"))},render(n){let e=this.getRoot();if(e.innerHTML=Q.render(this.templates.panel,{panels:this.getView(n)},{sub_tree:this.templates.list}),n==="load")return;let t=[...e.querySelectorAll(".mmenu__panel")],s=t.at(this.currentIndex);e.parentElement.scrollTop>this.SCROLL_TRESHOLD&&this.currentIndex>0&&s.querySelector(".mmenu__back").scrollIntoView({block:"start",behaviour:"smooth"}),setTimeout(()=>{switch(s.classList.remove("mmenu__panel--visible-right","mmenu__panel--visible-left"),n){case"up":t.at(this.currentIndex-1).classList.add("mmenu__panel--visible-left");break;case"down":t.at(this.currentIndex+1).classList.add("mmenu__panel--visible-right");break;default:}setTimeout(()=>{t.forEach(r=>{r.classList.contains("mmenu__panel--current")||(r.style.visibility="hidden")})},200)},10)},async load(){let e=await(await fetch(this.getAPIUrl())).json(),t=Object.getOwnPropertyNames(e);if(!t.length)throw new Error("No instances found in data",e);let s=t.map(o=>{let l=e[o].menu_tree[0];return l.parentId="",l}),r=s.findRecursive(o=>Z.call(o),"sub_tree");r&&(r.active=!0,r.inPath=!0);let a=r?.parentId;for(;a;)s.findRecursive(l=>l.id===a?(a=l.parentId,l.inPath=!0,!0):!1,"sub_tree")||(a=void 0);this.data=s},async start(){let n=document.querySelector(this.selectors.container);if(!this.getRoot()||!n)throw new Error("Panel root not found");n.classList.add("mmenu--visible"),this.render("load");try{await this.load()}catch(e){console.error("Unable to load menu API, using fallback menu instead",e),this.enableFallback();return}this.sortPanelsByPath(),this.render("start"),this.getRoot().addEventListener("click",e=>{let{target:{classList:t,value:s,parentElement:r}}=e;e.stopImmediatePropagation(),t&&t.contains(this.selectors.forward)?this.up(s):(t&&t.contains(this.selectors.back)||r?.classList&&r?.classList.contains(this.selectors.back))&&this.down()})},isOpen(){return window.location.hash==="#menu"||this.toggleButton.getAttribute("aria-expanded")==="true"},disableFallback(){this.menu.dataset.js=!0},enableFallback(){this.menu.dataset.target="false",this.getRoot().innerHTML="",delete this.menu.dataset.js,window.location.hash="#menu"},close(){this.toggleButton.setAttribute("aria-expanded","false"),this.menu.dataset.target="false",this.onClose&&this.onClose()},open(){this.menu.dataset.target="true",this.toggleButton.setAttribute("aria-expanded","true"),this.onOpen&&this.onOpen()},toggle(){this.isOpen()?this.close():this.open(),this.toggleButton.focus()},init({onOpen:n,onClose:e}){if(this.running){console.warn("MobilePanel already initiated. Is it include more than once?");return}if(this.onOpen=n,this.onClose=e,this.toggleButton=document.querySelector(".js-menu-toggle-button"),!this.toggleButton)throw new Error("No toggle button for JS menu.");if(this.menu=document.querySelector("#menu"),!this.menu){console.error("Panel not present in DOM. Cannot start JS mobile menu");return}this.disableFallback(),document.addEventListener("keydown",s=>{s.key==="Escape"&&this.isOpen()&&(this.close(),this.toggleButton.focus())});let t=i(()=>{this.compileTemplates(),this.toggleButton.removeEventListener("click",t),this.start()},"start");this.toggleButton.addEventListener("click",t),this.toggleButton.addEventListener("click",()=>this.toggle()),this.isOpen()&&(window.location.hash="",t(),this.open()),this.running=!0}},te=De;(n=>{n.behaviors.navToggle={attach(e,t){if(window.navToggleInitialized&&e===document)return;let s={},r=t.hdbt.global_menu?te:!1;if(t.hdbt.profile_dropdown&&(s.ProfileDropdown="profile"),t.hdbt.search_dropdown&&(s.SearchDropdown="search"),t.hdbt.otherlangs_dropdown&&(s.OtherLangsDropdown="otherlangs"),r||(s.CssMenuDropdownDropdown="cssmenu"),t.hdbt.language_toast_dropdown){let u=t.hdbt.current_language;["fi","sv","en"].forEach(h=>{if(h!==u){let m=`LanguageToast${h.charAt(0).toUpperCase()}${h.slice(1)}`;s[m]=`language-toast--${h}`}})}let a=i(u=>u.scrollWidth>u.clientWidth||u.scrollHeight>u.clientHeight,"isScrollable"),o=i(()=>window.matchMedia("(max-width: 768px)").matches,"isMobile"),l=s,c=Object.keys(l);c.forEach(u=>{let b=l[u];l[u]=(0,ne.default)(),l[u].init({buttonSelector:`.js-${b}-button`,dropdownSelector:`.js-${b}-dropdown`,name:`${b} dropdown`,onClose:I.open,onOpen:i(()=>{if(c.forEach(h=>{h!==u&&l[h].simpleClose()}),r&&r.close(),(0,I.close)(),u==="SearchDropdown"&&window.setTimeout(()=>document.querySelector('.header-search-wrapper input[type="search"]')?.focus(),10),u.startsWith("LanguageToast")){let h=l[u],m=h?.dropdownInstance?.parentElement;m&&(m.onfocusout=null,m.addEventListener("focusout",()=>{setTimeout(()=>{let f=document.activeElement;m.contains(f)||h.simpleClose()},10)}))}},"onOpen"),targetSelector:`#${b}`})}),r&&r.init({onOpen:i(()=>{c.forEach(u=>{l[u].close()}),(0,I.close)()},"onOpen"),onClose:I.open});let d=i(()=>c.some(u=>l[u].dataset&&l[u].isOpen())||r&&r.isOpen(),"isAnyMenuOpen"),p=i(({target:u})=>{(u.closest(".desktop-menu, .header-top")||!u.closest(".header"))&&(c.forEach(b=>{l[b].simpleClose()}),r&&r.close(),(0,I.open)())},"closeFromOutside"),g=i(u=>{if(u.touches?.length>1)return!0;let b=u.target.closest(".mmenu__panel--current, .nav-toggle-dropdown__content");if(o()&&d()&&(!u.target.closest(".nav-toggle-dropdown")||b&&!a(b)))return u.preventDefault(),u.stopPropagation(),!1},"blockBrandingScroll");e.addEventListener("click",p);let y=document.querySelector("body");y.addEventListener("wheel",g,{passive:!1}),y.addEventListener("scroll",g,{passive:!1}),y.addEventListener("touchmove",g,{passive:!1}),window.navToggleInitialized=!0}}})(Drupal);})();
