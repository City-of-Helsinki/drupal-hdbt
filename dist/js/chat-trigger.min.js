(()=>{(function(){let c={fallback:{fi:"Chatti ei ole saatavilla.",sv:"Chatten är inte tillgänglig.",en:"The chat is not available."},openChat:{fi:"Avaa chat",sv:"Öppna chatten",en:"Open the chat"}};function s(o){return new Promise(a=>{let e=document.querySelector(o);if(e)a(e);else{let n=new MutationObserver(()=>{let t=document.querySelector(o);t&&(n.disconnect(),a(t))});n.observe(document.documentElement,{childList:!0,subtree:!0})}})}function l(){let o=document.querySelectorAll("p[data-chat-trigger]"),a=window?.drupalSettings?.path?.currentLanguage||"en";o.forEach(e=>{let n=e.dataset.chatTrigger;if(!document.querySelector(n)){let t=c.fallback[a]||c.fallback.en;e.textContent=t}s(n).then(()=>{let t=document.createElement("button");t.textContent=c.openChat[a]||c.openChat.en,t.dataset.hdsComponent="button",t.dataset.hdsVariant="secondary",t.dataset.clickSelector=n,t.addEventListener("click",d=>{let r=d.target?.dataset?.clickSelector;if(r){let i=document.querySelector(r);i&&i.click()}}),e.removeAttribute("data-chat-trigger"),e.innerHTML="",e.appendChild(t)})})}window.addEventListener("DOMContentLoaded",l)})();})();
