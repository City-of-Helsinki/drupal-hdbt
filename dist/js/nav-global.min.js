!function(){var t={184:function(t,e){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(n){var a=typeof n;if("string"===a||"number"===a)t.push(n);else if(Array.isArray(n)){if(n.length){var s=i.apply(null,n);s&&t.push(s)}}else if("object"===a)if(n.toString===Object.prototype.toString)for(var o in n)r.call(n,o)&&n[o]&&t.push(o);else t.push(n.toString())}}return t.join(" ")}t.exports?(i.default=i,t.exports=i):void 0===(n=function(){return i}.apply(e,[]))||(t.exports=n)}()},466:function(t){t.exports=function(){"use strict";var t=Object.prototype.toString,e=Array.isArray||function(e){return"[object Array]"===t.call(e)};function n(t){return"function"==typeof t}function r(t){return e(t)?"array":typeof t}function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function a(t,e){return null!=t&&"object"==typeof t&&e in t}function s(t,e){return null!=t&&"object"!=typeof t&&t.hasOwnProperty&&t.hasOwnProperty(e)}var o=RegExp.prototype.test;function l(t,e){return o.call(t,e)}var u=/\S/;function c(t){return!l(u,t)}var h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function p(t){return String(t).replace(/[&<>"'`=\/]/g,(function(t){return h[t]}))}var d=/\s*/,f=/\s+/,m=/\s*=/,g=/\s*\}/,v=/#|\^|\/|>|\{|&|=|!/;function b(t,n){if(!t)return[];var r,a,s,o=!1,l=[],u=[],h=[],p=!1,b=!1,k="",y=0;function L(){if(p&&!b)for(;h.length;)delete u[h.pop()];else h=[];p=!1,b=!1}function E(t){if("string"==typeof t&&(t=t.split(f,2)),!e(t)||2!==t.length)throw new Error("Invalid tags: "+t);r=new RegExp(i(t[0])+"\\s*"),a=new RegExp("\\s*"+i(t[1])),s=new RegExp("\\s*"+i("}"+t[1]))}E(n||I.tags);for(var A,P,S,C,T,j,R=new w(t);!R.eos();){if(A=R.pos,S=R.scanUntil(r))for(var O=0,U=S.length;O<U;++O)c(C=S.charAt(O))?(h.push(u.length),k+=C):(b=!0,o=!0,k+=" "),u.push(["text",C,A,A+1]),A+=1,"\n"===C&&(L(),k="",y=0,o=!1);if(!R.scan(r))break;if(p=!0,P=R.scan(v)||"name",R.scan(d),"="===P?(S=R.scanUntil(m),R.scan(m),R.scanUntil(a)):"{"===P?(S=R.scanUntil(s),R.scan(g),R.scanUntil(a),P="&"):S=R.scanUntil(a),!R.scan(a))throw new Error("Unclosed tag at "+R.pos);if(T=">"==P?[P,S,A,R.pos,k,y,o]:[P,S,A,R.pos],y++,u.push(T),"#"===P||"^"===P)l.push(T);else if("/"===P){if(!(j=l.pop()))throw new Error('Unopened section "'+S+'" at '+A);if(j[1]!==S)throw new Error('Unclosed section "'+j[1]+'" at '+A)}else"name"===P||"{"===P||"&"===P?b=!0:"="===P&&E(S)}if(L(),j=l.pop())throw new Error('Unclosed section "'+j[1]+'" at '+R.pos);return _(x(u))}function x(t){for(var e,n,r=[],i=0,a=t.length;i<a;++i)(e=t[i])&&("text"===e[0]&&n&&"text"===n[0]?(n[1]+=e[1],n[3]=e[3]):(r.push(e),n=e));return r}function _(t){for(var e,n=[],r=n,i=[],a=0,s=t.length;a<s;++a)switch((e=t[a])[0]){case"#":case"^":r.push(e),i.push(e),r=e[4]=[];break;case"/":i.pop()[5]=e[2],r=i.length>0?i[i.length-1][4]:n;break;default:r.push(e)}return n}function w(t){this.string=t,this.tail=t,this.pos=0}function k(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function y(){this.templateCache={_cache:{},set:function(t,e){this._cache[t]=e},get:function(t){return this._cache[t]},clear:function(){this._cache={}}}}w.prototype.eos=function(){return""===this.tail},w.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var n=e[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},w.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=e.length,e},k.prototype.push=function(t){return new k(t,this)},k.prototype.lookup=function(t){var e,r=this.cache;if(r.hasOwnProperty(t))e=r[t];else{for(var i,o,l,u=this,c=!1;u;){if(t.indexOf(".")>0)for(i=u.view,o=t.split("."),l=0;null!=i&&l<o.length;)l===o.length-1&&(c=a(i,o[l])||s(i,o[l])),i=i[o[l++]];else i=u.view[t],c=a(u.view,t);if(c){e=i;break}u=u.parent}r[t]=e}return n(e)&&(e=e.call(this.view)),e},y.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},y.prototype.parse=function(t,e){var n=this.templateCache,r=t+":"+(e||I.tags).join(":"),i=void 0!==n,a=i?n.get(r):void 0;return null==a&&(a=b(t,e),i&&n.set(r,a)),a},y.prototype.render=function(t,e,n,r){var i=this.getConfigTags(r),a=this.parse(t,i),s=e instanceof k?e:new k(e,void 0);return this.renderTokens(a,s,n,t,r)},y.prototype.renderTokens=function(t,e,n,r,i){for(var a,s,o,l="",u=0,c=t.length;u<c;++u)o=void 0,"#"===(s=(a=t[u])[0])?o=this.renderSection(a,e,n,r,i):"^"===s?o=this.renderInverted(a,e,n,r,i):">"===s?o=this.renderPartial(a,e,n,i):"&"===s?o=this.unescapedValue(a,e):"name"===s?o=this.escapedValue(a,e,i):"text"===s&&(o=this.rawValue(a)),void 0!==o&&(l+=o);return l},y.prototype.renderSection=function(t,r,i,a,s){var o=this,l="",u=r.lookup(t[1]);function c(t){return o.render(t,r,i,s)}if(u){if(e(u))for(var h=0,p=u.length;h<p;++h)l+=this.renderTokens(t[4],r.push(u[h]),i,a,s);else if("object"==typeof u||"string"==typeof u||"number"==typeof u)l+=this.renderTokens(t[4],r.push(u),i,a,s);else if(n(u)){if("string"!=typeof a)throw new Error("Cannot use higher-order sections without the original template");null!=(u=u.call(r.view,a.slice(t[3],t[5]),c))&&(l+=u)}else l+=this.renderTokens(t[4],r,i,a,s);return l}},y.prototype.renderInverted=function(t,n,r,i,a){var s=n.lookup(t[1]);if(!s||e(s)&&0===s.length)return this.renderTokens(t[4],n,r,i,a)},y.prototype.indentPartial=function(t,e,n){for(var r=e.replace(/[^ \t]/g,""),i=t.split("\n"),a=0;a<i.length;a++)i[a].length&&(a>0||!n)&&(i[a]=r+i[a]);return i.join("\n")},y.prototype.renderPartial=function(t,e,r,i){if(r){var a=this.getConfigTags(i),s=n(r)?r(t[1]):r[t[1]];if(null!=s){var o=t[6],l=t[5],u=t[4],c=s;0==l&&u&&(c=this.indentPartial(s,u,o));var h=this.parse(c,a);return this.renderTokens(h,e,r,c,i)}}},y.prototype.unescapedValue=function(t,e){var n=e.lookup(t[1]);if(null!=n)return n},y.prototype.escapedValue=function(t,e,n){var r=this.getConfigEscape(n)||I.escape,i=e.lookup(t[1]);if(null!=i)return"number"==typeof i&&r===I.escape?String(i):r(i)},y.prototype.rawValue=function(t){return t[1]},y.prototype.getConfigTags=function(t){return e(t)?t:t&&"object"==typeof t?t.tags:void 0},y.prototype.getConfigEscape=function(t){return t&&"object"==typeof t&&!e(t)?t.escape:void 0};var I={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(t){L.templateCache=t},get templateCache(){return L.templateCache}},L=new y;return I.clearCache=function(){return L.clearCache()},I.parse=function(t,e){return L.parse(t,e)},I.render=function(t,e,n,i){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+r(t)+'" was given as the first argument for mustache#render(template, view, partials)');return L.render(t,e,n,i)},I.escape=p,I.Scanner=w,I.Context=k,I.Writer=y,I}()}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var a=e[r]={exports:{}};return t[r].call(a.exports,a,a.exports,n),a.exports}!function(){const t=n(466),e=n(184),r=Drupal.t("Frontpage",{},{context:"Global navigation mobile menu top level"}),i=["#chat-leijuke-wrapper",".si-toggle-container",".cx-theme-helsinki-blue","#smartti-wrapper",".aca--button--desktop, .aca--button--mobile, .aca--widget--mobile, .aca--widget--desktop, #aca--widget-button-close","#block-kuurahealthchat","#ed11y-panel"];function a(t){document.querySelectorAll(i.join(",")).forEach((e=>{t?e.dataset.cssmenuHide=!0:delete e.dataset.cssmenuHide}))}Array.prototype.findRecursive=function(t,e){if(!e)throw"findRecursive requires parameter `childrenPropertyName`";let n=[];n=this;let r=this.find(t),i=this.filter((t=>t[e]));if(r)return r;if(i.length){let n=[];return i.forEach((t=>{n.push(...t[e])})),n.findRecursive(t,e)}};const s=function(){return this.sub_tree?.length>0},o=function(){try{return!this.external&&this.url&&new URL(this.url).pathname===window.location.pathname}catch(t){console.warn('Invalid url given to "active"-helper',this.url)}return!1},l=function(){return!!this.active},u=function(){return!!this.inPath},c=function(){return{external:this.attributes["data-external"]||this.external||!1,protocol:this.attributes["data-protocol"]||!1}},h=function(){return!!this.attributes?.lang},p=function(){return!!this.external&&(p.ICONS[this.attributes["data-protocol"]]||p.ICONS.external)};p.ICONS={mailto:{class:"link__type link__type--mailto",text:Drupal.t("Link opens default mail program",{},{context:"Explanation for screen-reader software that the icon visible next to this link means that the link opens default mail program."})},tel:{class:"link__type link__type--tel",text:Drupal.t("Link starts a phone call",{},{context:"Explanation for screen-reader software that the icon visible next to this link means that the link starts a phone call."})},external:{class:"link__type link__type--external",text:Drupal.t("Link leads to external service",{},{context:"Explanation for screen-reader software that the icon visible next to this link means that the link leads to an external service."})}};const d={compileTemplates:function(){this.templates={panel:`\n{{#panels}}\n  <section class="{{panel_class}}">\n    <div class="mmenu__panel-body">\n      {{#back}}\n        <button class="mmenu__back">\n          <span class="mmenu__back-wrapper">{{back}}</span>\n        </button>\n      {{/back}}\n      <a href="{{url}}" class="mmenu__title-link{{#isInPath}} mmenu__title-link--in-path{{/isInPath}}"{{#isActive}} aria-current="page"{{/isActive}}\n\n      {{#externalLinkAttributes.external}}\n        data-external="true"\n      {{/externalLinkAttributes.external}}\n\n      {{#externalLinkAttributes.protocol}}\n        data-protocol="{{externalLinkAttributes.protocol}}"\n      {{/externalLinkAttributes.protocol}}\n\n      {{#hasLang}}\n        lang="{{attributes.lang}}"\n      {{/hasLang}}\n\n      >{{name}}{{#externalLinkIcon}} <span class="{{class}}" aria-label="({{text}})"></span>{{/externalLinkIcon}}</a>\n      {{>sub_tree}}\n    </div>\n    ${document.querySelector(".js-mmenu__footer")?.outerHTML}\n  </section>\n{{/panels}}\n\n{{^panels}}\n<div class="mmenu__loading">\n  <div class="hds-loading-spinner">\n    <div></div>\n    <div></div>\n    <div></div>\n  </div>\n</div>\n{{/panels}}\n`,list:'\n  <ul class="mmenu__items">\n    {{#sub_tree}}\n      <li class="mmenu__item">\n\n        <a href="{{url}}" class="mmenu__item-link{{#isInPath}} mmenu__item-link--in-path{{/isInPath}}"{{#isActive}} aria-current="page"{{/isActive}}\n\n        {{#externalLinkAttributes.external}}\n          data-external="true"\n        {{/externalLinkAttributes.external}}\n\n        {{#externalLinkAttributes.protocol}}\n          data-protocol={{externalLinkAttributes.protocol}}\n        {{/externalLinkAttributes.protocol}}\n\n        {{#hasLang}}\n          lang="{{attributes.lang}}"\n        {{/hasLang}}\n\n        >\n          {{name}}{{#externalLinkIcon}} <span class="{{class}}" aria-label="({{text}})"></span>{{/externalLinkIcon}}\n        </a>\n        {{#button}}\n          <button class="mmenu__forward " value={{id}} />\n        {{/button}}\n      </li>\n    {{/sub_tree}}\n  </ul>\n '}},menu:null,templates:null,SCROLL_TRESHOLD:100,size:10,data:null,currentIndex:0,cacheKey:"hdbt-mobile-menu",enableCache:!1,selectors:{container:"#mmenu",rootId:"mmenu__panels",forward:"mmenu__forward",back:"mmenu__back"},getAPIUrl:function(){const t=new URL(drupalSettings?.helfi_navigation?.links?.api);return t.searchParams.set("_format","json"),t.toString()},getRoot:function(){return document.getElementById(this.selectors.rootId)},sortPanelsByPath:function(){const t=[],e=this.data,n=e.findRecursive((t=>o.call(t)),"sub_tree");let r=n?.sub_tree?.length?n.id:n?.parentId;for(;r;){const n=e.findRecursive((({id:e,url:n,name:i,sub_tree:a,parentId:s,inPath:o,active:l})=>e===r&&(t.push({sub_tree:a,name:i,url:n,parentId:s,inPath:o,active:l}),r=s,!0)),"sub_tree");n||(r=void 0)}t.push({sub_tree:e,inPath:!0}),t.reverse(),this.currentIndex=t.length-1,this.content=[...t]},content:[],getView:function(t){return this.content.map(((n,i)=>({...n,name:n?.name||r,url:n.url||drupalSettings.helfi_navigation.links.canonical,button:s,isActive:l,isInPath:u,externalLinkAttributes:c,hasLang:h,externalLinkIcon:p,back:i>0&&(this.content.at(i-1)?.name??r),panel_class:e({mmenu__panel:!0,"mmenu__panel--visible":!0,"mmenu__panel--current":i===this.currentIndex,"mmenu__panel--visible-right":"start"===t&&i>this.currentIndex||"up"===t&&i>=this.currentIndex||"down"===t&&i>this.currentIndex+1,"mmenu__panel--visible-left":"up"===t&&i<this.currentIndex-1||"down"===t&&i<=this.currentIndex})})))},up:function(t){if(!t)throw`Id missing for next menu item  ${t}`;const e=this.content.at(this.currentIndex).sub_tree.find((({id:e})=>e===t));if(!e)throw new Error("ID mismatch in menu items"+t);this.currentIndex=this.currentIndex+1<this.size?this.currentIndex+1:this.currentIndex,this.content[this.currentIndex]=e,this.render("up")},down:function(){0!==this.currentIndex&&(this.currentIndex=this.currentIndex-1>=0?this.currentIndex-1:this.currentIndex,this.render("down"))},render:function(e){const n=this.getRoot();if(n.innerHTML=t.render(this.templates.panel,{panels:this.getView(e)},{sub_tree:this.templates.list}),"load"===e)return;const r=[...n.querySelectorAll(".mmenu__panel")],i=r.at(this.currentIndex);n.parentElement.scrollTop>this.SCROLL_TRESHOLD&&this.currentIndex>0&&i.querySelector(".mmenu__back").scrollIntoView({block:"start",behaviour:"smooth"}),setTimeout((()=>{switch(i.classList.remove("mmenu__panel--visible-right","mmenu__panel--visible-left"),e){case"up":r.at(this.currentIndex-1).classList.add("mmenu__panel--visible-left");break;case"down":r.at(this.currentIndex+1).classList.add("mmenu__panel--visible-right")}setTimeout((()=>{r.forEach((t=>{t.classList.contains("mmenu__panel--current")||(t.style.visibility="hidden")}))}),200)}),10)},load:async function(){const t=await fetch(this.getAPIUrl()),e=await t.json();var n=Object.getOwnPropertyNames(e);if(!n.length)throw new Error("No instances found in data",e);const r=n.map((t=>{const n=e[t].menu_tree[0];return n.parentId="",n})),i=r.findRecursive((t=>o.call(t)),"sub_tree");i&&(i.active=!0,i.inPath=!0);let a=i?.parentId;for(;a;){r.findRecursive((t=>t.id===a&&(a=t.parentId,t.inPath=!0,!0)),"sub_tree")||(a=void 0)}this.data=r},start:async function(){const t=document.querySelector(this.selectors.container);if(!this.getRoot()||!t)throw new Error("Panel root not found");t.classList.add("mmenu--visible"),this.render("load");try{await this.load()}catch(t){return console.error("Unable to load menu data, using mock menu for development purposes. Reset to nojs-fallback when integrating with actual API",t),void this.enableFallback()}this.sortPanelsByPath(),this.render("start"),this.getRoot().addEventListener("click",(({target:{classList:t,value:e,parentElement:n}})=>{t&&t.contains(this.selectors.forward)?this.up(e):(t&&t.contains(this.selectors.back)||n?.classList&&n?.classList.contains(this.selectors.back))&&this.down()}))},menuIsOpen:function(){return"#menu"===window.location.hash||"true"===this.toggleButton.getAttribute("aria-expanded")},disableFallback:function(){d.menu.dataset.js=!0},enableFallback:function(){d.menu.dataset.target="false",this.getRoot().innerHTML="",delete d.menu.dataset.js,window.location.hash="#menu"},menuToggle:function(){this.menuIsOpen()?(this.toggleButton.setAttribute("aria-expanded","false"),this.menu.dataset.target="false",a(!1)):(a(!0),this.menu.dataset.target="true",this.toggleButton.setAttribute("aria-expanded","true")),this.toggleButton.focus()}};document.addEventListener("DOMContentLoaded",(()=>{if(d.toggleButton=document.querySelector(".js-menu-toggle-button"),!d.toggleButton)throw"No toggle button for JS menu.";if(d.menu=document.querySelector("#menu"),!d.menu)return void console.error("Panel not present in DOM. Cannot start JS mobile menu");d.disableFallback(),document.addEventListener("keydown",(function(t){"Escape"!=t.key&&"Esc"!=t.key&&27!=t.keyCode||!d.menuIsOpen()||d.menuToggle()}));const t=function(){d.compileTemplates(),d.toggleButton.removeEventListener("click",t),d.start()};d.toggleButton.addEventListener("click",t),d.toggleButton.addEventListener("click",(()=>d.menuToggle())),d.menuIsOpen()&&(window.location.hash="",t(),d.menuToggle())}))}()}();