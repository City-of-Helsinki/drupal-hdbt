!function(){"use strict";class e{saveEventKey="localstorage-save-event";constructor(e){this.data={},this.storageKey=e,this.loadData(),addEventListener(this.saveEventKey,this.loadOnChange)}loadOnChange=()=>{this.loadData()};triggerSaveEvent=()=>{dispatchEvent(new CustomEvent(this.saveEventKey))};loadData=()=>{let t=null;try{t=localStorage.getItem(this.storageKey)}catch(t){e.handleError(t)}this.data=t?JSON.parse(t):{}};saveData=()=>{try{localStorage.setItem(this.storageKey,JSON.stringify(this.data)),this.triggerSaveEvent()}catch(t){e.handleError(t)}};setValue=(e,t)=>{this.data[e]=t,this.saveData()};addValue=(e,t)=>{this.data[e]||(this.data[e]=[]),"string"!=typeof t||this.data[e].includes(t)||(this.data[e].push(t),this.saveData())};getValue=e=>this.data[e]||null;getValues=e=>this.data[e]||null;removeValue=(e,t)=>{if(this.data[e]){const n=this.data[e].indexOf(t);n>-1&&(this.data[e].splice(n,1),this.saveData())}};static handleError(e){if(!(e instanceof ReferenceError))throw e}}!function(Drupal){Drupal.behaviors.closable_announcements={attach:function(){const t="js-announcement",n="js-announcement--hide",a="js-announcement__close--disabled",s="hidden-helfi-announcements",o=new e("helfi-settings");function l(e){!function(e){const{uuid:t}=e.dataset;t&&o.addValue(s,t)}(e),e.style=`--js-announcement-height: ${e.offsetHeight}px`,window.setTimeout((()=>{let t=!1;const a=document.querySelectorAll(".announcement:not(.js-announcement--hide)");e.classList.add(n);for(let n=0,s=a.length;n<s;n++)if(a[n].dataset.uuid===e.dataset.uuid&&n>0){const e=a[n-1].querySelectorAll(".announcement__close, .announcement__link a");e[e.length-1].focus(),t=!0;break}if(!1===t){const e=document.querySelector(".header-bottom .desktop-menu > .menu");if(!0===("none"===window.getComputedStyle(e).display)){const e=document.querySelectorAll(".nav-toggle__button, .breadcrumb a:last-of-type");e[e.length-1].focus()}else{const e=document.querySelectorAll(".nav-toggle__button, .header-bottom .menu--level-0 > .menu__item:last-child > .menu__link-wrapper :where(a, button), .breadcrumb a:last-of-type");e[e.length-1].focus()}}}),1)}function i(e){l(e.target.closest(`.${t}`))}window.unhideAnnouncements=function(){o.removeValue(s),window.location.reload()},function(){const e=document.querySelectorAll(`.${a}`);for(let t=0;t<e.length;t++){const n=e[t];n.addEventListener("click",i),n.classList.remove(a)}}()}}}(Drupal)}();