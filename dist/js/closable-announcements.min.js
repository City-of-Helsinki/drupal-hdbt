(()=>{var b=Object.defineProperty;var A=(s,e,t)=>e in s?b(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var o=(s,e,t)=>A(s,typeof e!="symbol"?e+"":e,t);var d=class s{constructor(e){o(this,"saveEventKey","localstorage-save-event");o(this,"loadOnChange",()=>{this.loadData()});o(this,"triggerSaveEvent",()=>{dispatchEvent(new CustomEvent(this.saveEventKey))});o(this,"loadData",()=>{let e=null;try{e=localStorage.getItem(this.storageKey)}catch(t){s.handleError(t)}this.data=e?JSON.parse(e):{}});o(this,"saveData",()=>{try{localStorage.setItem(this.storageKey,JSON.stringify(this.data)),this.triggerSaveEvent()}catch(e){s.handleError(e)}});o(this,"setValue",(e,t)=>{this.data[e]=t,this.saveData()});o(this,"addValue",(e,t)=>{this.data[e]||(this.data[e]=[]),typeof t=="string"&&!this.data[e].includes(t)&&(this.data[e].push(t),this.saveData())});o(this,"getValue",e=>this.data[e]||null);o(this,"getValues",e=>this.data[e]||null);o(this,"removeValue",(e,t)=>{if(this.data[e]){let u=this.data[e].indexOf(t);u>-1&&(this.data[e].splice(u,1),this.saveData())}});this.data={},this.storageKey=e,this.loadData(),addEventListener(this.saveEventKey,this.loadOnChange)}static handleError(e){if(!(e instanceof ReferenceError))throw e}};(function(s){s.behaviors.closable_announcements={attach:function(){let t="js-announcement",u="js-announcement--hide",r="js-announcement__close--disabled",h="hidden-helfi-announcements",m=new d("helfi-settings");function g(n){let{uuid:a}=n.dataset;a&&m.addValue(h,a)}function v(n){g(n),n.style=`--js-announcement-height: ${n.offsetHeight}px`,window.setTimeout(()=>{let a=!1,c=document.querySelectorAll(".announcement:not(.js-announcement--hide)");n.classList.add(u);for(let i=0,f=c.length;i<f;i++)if(c[i].dataset.uuid===n.dataset.uuid&&i>0){let l=c[i-1].querySelectorAll(".announcement__close, .announcement__link a");l[l.length-1].focus(),a=!0;break}if(a===!1){let i=document.querySelector(".header-bottom .desktop-menu > .menu");if(window.getComputedStyle(i).display==="none"===!0){let l=document.querySelectorAll(".nav-toggle__button, .breadcrumb a:last-of-type");l[l.length-1].focus()}else{let l=document.querySelectorAll(".nav-toggle__button, .header-bottom .menu--level-0 > .menu__item:last-child > .menu__link-wrapper :where(a, button), .breadcrumb a:last-of-type");l[l.length-1].focus()}}},1)}function E(n){let a=n.target.closest(`.${t}`);v(a)}function p(){let n=document.querySelectorAll(`.${r}`);for(let a=0;a<n.length;a++){let c=n[a];c.addEventListener("click",E),c.classList.remove(r)}}window.unhideAnnouncements=function(){m.removeValue(h),window.location.reload()},p()}}})(Drupal);})();
