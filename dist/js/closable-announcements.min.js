(()=>{var E=Object.defineProperty;var S=(l,e,n)=>e in l?E(l,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[e]=n;var t=(l,e)=>E(l,"name",{value:e,configurable:!0});var o=(l,e,n)=>S(l,typeof e!="symbol"?e+"":e,n);var u=class u{constructor(e){o(this,"saveEventKey","localstorage-save-event");o(this,"loadOnChange",t(()=>{this.loadData()},"loadOnChange"));o(this,"triggerSaveEvent",t(()=>{dispatchEvent(new CustomEvent(this.saveEventKey))},"triggerSaveEvent"));o(this,"loadData",t(()=>{let e=null;try{e=localStorage.getItem(this.storageKey)}catch(n){u.handleError(n)}this.data=e?JSON.parse(e):{}},"loadData"));o(this,"saveData",t(()=>{try{localStorage.setItem(this.storageKey,JSON.stringify(this.data)),this.triggerSaveEvent()}catch(e){u.handleError(e)}},"saveData"));o(this,"setValue",t((e,n)=>{this.data[e]=n,this.saveData()},"setValue"));o(this,"addValue",t((e,n)=>{this.data[e]||(this.data[e]=[]),typeof n=="string"&&!this.data[e].includes(n)&&(this.data[e].push(n),this.saveData())},"addValue"));o(this,"getValue",t(e=>this.data[e]||null,"getValue"));o(this,"getValues",t(e=>this.data[e]||null,"getValues"));o(this,"removeValue",t((e,n)=>{if(this.data[e]){let h=this.data[e].indexOf(n);h>-1&&(this.data[e].splice(h,1),this.saveData())}},"removeValue"));this.data={},this.storageKey=e,this.loadData(),addEventListener(this.saveEventKey,this.loadOnChange)}static handleError(e){if(!(e instanceof ReferenceError))throw e}};t(u,"LocalStorageManager");var r=u;(function(l){l.behaviors.closable_announcements={attach:t(function(){let n="js-announcement",h="js-announcement--hide",m="js-announcement__close--disabled",f="hidden-helfi-announcements",g=new r("helfi-settings");function p(a){let{uuid:s}=a.dataset;s&&g.addValue(f,s)}t(p,"addToAnnouncementStorage");function b(a){p(a),a.style=`--js-announcement-height: ${a.offsetHeight}px`,window.setTimeout(()=>{let s=!1,d=document.querySelectorAll(".announcement:not(.js-announcement--hide)");a.classList.add(h);for(let c=0,v=d.length;c<v;c++)if(d[c].dataset.uuid===a.dataset.uuid&&c>0){let i=d[c-1].querySelectorAll(".announcement__close, .announcement__link a");i[i.length-1].focus(),s=!0;break}if(s===!1){let c=document.querySelector(".header-bottom .desktop-menu > .menu");if(window.getComputedStyle(c).display==="none"===!0){let i=document.querySelectorAll(".nav-toggle__button, .breadcrumb a:last-of-type");i[i.length-1].focus()}else{let i=document.querySelectorAll(".nav-toggle__button, .header-bottom .menu--level-0 > .menu__item:last-child > .menu__link-wrapper :where(a, button), .breadcrumb a:last-of-type");i[i.length-1].focus()}}},1)}t(b,"closeAnnouncement");function A(a){let s=a.target.closest(`.${n}`);b(s)}t(A,"triggerAnnouncementClose");function y(){let a=document.querySelectorAll(`.${m}`);for(let s=0;s<a.length;s++){let d=a[s];d.addEventListener("click",A),d.classList.remove(m)}}t(y,"enableAnnouncementClosing"),window.unhideAnnouncements=t(function(){g.removeValue(f),window.location.reload()},"unhideAnnouncements"),y()},"attach")}})(Drupal);})();
