!function(){"use strict";class t{constructor(t){this.storageKey=t,this.loadData()}loadData(){const t=localStorage.getItem(this.storageKey);this.data=t?JSON.parse(t):{}}saveData(){localStorage.setItem(this.storageKey,JSON.stringify(this.data))}setValue(t,e){this.data[t]=e,this.saveData()}getValue(t){return this.data[t]||null}addValue(t,e){this.data[t]||(this.data[t]=[]),"string"!=typeof e||this.data[t].includes(e)||(this.data[t].push(e),this.saveData())}getValues(t){return this.data[t]||null}removeValue(t,e){if(this.data[t]){const n=this.data[t].indexOf(e);n>-1&&(this.data[t].splice(n,1),this.saveData())}}}!function(Drupal){Drupal.behaviors.closable_announcements={attach:function(){const e="js-announcement",n="js-announcement--hide",a="js-announcement__close--disabled",o="hidden-helfi-announcements",s=new t("helfi-settings");function l(t){!function(t){const{uuid:e}=t.dataset;e&&s.addValue(o,e)}(t),t.style=`--js-announcement-height: ${t.offsetHeight}px`,window.setTimeout((()=>{let e=!1;const a=document.querySelectorAll(".announcement:not(.js-announcement--hide)");t.classList.add(n);for(let n=0,o=a.length;n<o;n++)if(a[n].dataset.uuid===t.dataset.uuid&&n>0){const t=a[n-1].querySelectorAll(".announcement__close, .announcement__link a");t[t.length-1].focus(),e=!0;break}if(!1===e){const t=document.querySelector(".header-bottom .desktop-menu > .menu");if(!0===("none"===window.getComputedStyle(t).display)){const t=document.querySelectorAll(".nav-toggle__button, .breadcrumb a:last-of-type");t[t.length-1].focus()}else{const t=document.querySelectorAll(".nav-toggle__button, .header-bottom .menu--level-0 > .menu__item:last-child > .menu__link-wrapper :where(a, button), .breadcrumb a:last-of-type");t[t.length-1].focus()}}}),1)}function u(t){l(t.target.closest(`.${e}`))}window.unhideAnnouncements=function(){s.removeValue(o),window.location.reload()},function(){const t=document.querySelectorAll(`.${a}`);for(let e=0;e<t.length;e++){const n=t[e];n.addEventListener("click",u),n.classList.remove(a)}}()}}}(Drupal)}();